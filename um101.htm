<!DOCTYPE HTML>
<html>
<head>
   <title>um101</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="merit function, definition,PSD algorithm" />
   <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />   
   
   <meta http-equiv="X-UA-Compatible" content="IE=8" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <link type="text/css" href="custom.css" rel="stylesheet">

   <style TYPE="text/css" media="screen"> 
      html, body { margin:0; 
             padding:0; 
             overflow: hidden; 
             background: #FFFFFF; 
       } 
html {
  overflow-x: auto; overflow-y: scroll;
}
      div#printheader { display: none; }
      #idheader { width:100%; 
                  height:auto; 
                  padding: 0; 
                  margin: 0; 
       } 
      #idcontent { position:relative }                                               
      #callout-table, #overview-table {display:block; position:relative; top:0; left:0;}
      #callout-icon {display:block; position:absolute; top:-11px; left:-11px;}
      #callout-icon-flag {display:block; position:absolute; top:-11px; left:-8px;}
      #callout-table a {text-decoration: none; color: blue;}
      #callout-table a:visited {text-decoration: none; color: blue;}
      #overview-table a {text-decoration: none; color: black;}
      #overview-table a:visited {text-decoration: none; color: black;}
      #callout-table a:hover, #overview-table a:hover {text-decoration: underline;}      
      #switchtoggles { text-align: right; padding: 0 5px 0 0; font-size: 90%; } 
      p.help-url { margin: 20px 0 5px 0; text-align: center; font-size: 80%; text-decoration: none }
      .sync-toc { color: #ffffff; font-size: 8pt; font-weight: bold; display: none; }
      .sync-toc a { color: #ffffff; text-decoration: none; font-weight: bold;}
      .sync-toc a:visited { color: #ffffff; }
      .sync-toc a:hover { text-decoration: underline; }

   </style>
   <noscript>
   <style type="text/css">
   html, body { overflow: auto; }
   </style> 
   </noscript>
   <style type="text/css" media="print">
      span.f_Heading1 { color: black; }
      #idheader, #printheader img { display:none; }
      #printheader { display: block; margin-top: 20px; }
      #idcontent { margin-top: 10px; position:relative }
   </style>   

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>
   <script type="text/javascript" src="nsh.js"></script>
<!--[if lt IE 7]>
<style type="text/css">
  #idcontent {padding: 0px;} 
  #innerdiv {padding: 10px 5px 5px 10px ;} 
</style> 
<![endif]-->



</head>
<body>


<div id="idcontent"><div id="innerdiv">
<!--ZOOMRESTART-->
<p class="p_mine" style="border-color: #000000; border-style: solid; border-width: 0px; border-top: none; border-right: none; border-left: none; margin: 0px 0px 1px 0px;"><span class="f_mine" style="font-size: 14pt;">10.1 Mathematical Method</span><span class="f_mine" style="font-family: 'Times New Roman';">  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="f_mine" style="font-family: 'Times New Roman'; text-decoration: underline;"><a href="um1011.htm" class="topiclink">Next</a></span><span class="f_mine" style="font-family: 'Times New Roman';"> </span><span class="f_mine" style="font-family: 'Times New Roman'; text-decoration: underline;"><a href="umch10.htm" class="topiclink">Previous</a></span><span class="f_mine" style="font-family: 'Times New Roman';"> </span><span class="f_mine" style="font-family: 'Times New Roman'; text-decoration: underline;"><a href="um.htm#um_contents" class="topiclink">TOC</a></span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">The design program should properly be called a design improvement program, because it requires a starting lens. &nbsp;(The </span><span class="f_mine" style="text-decoration: underline;"><a href="um153.htm#xsys" class="topiclink">XSYS</a></span><span class="f_mine"> program as well as </span><span class="f_mine" style="text-decoration: underline;"><a href="um1014.htm#dsearch" class="topiclink">DSEARCH</a></span><span class="f_mine"> and </span><span class="f_mine" style="text-decoration: underline;"><a href="um1017.htm#spb" class="topiclink">SPBUILD</a></span><span class="f_mine"> can help in finding such a lens. &nbsp;In the terminology of the industry, those are “Global Optimization” features.) &nbsp;The sole requirement of this starting lens is that all of the rays to be traced must do so without encountering intersection errors (MCS) or refraction errors (TIR). &nbsp;(The program has tools to deal with those problems, too; see the ERROR aberration in </span><span class="f_mine" style="text-decoration: underline;"><a href="um10312.htm" class="topiclink">Section 10.3.1.2</a></span><span class="f_mine">.) &nbsp;The optimization program iteratively improves the state of correction by driving the merit function to as small a value as possible.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">The success of this process depends on how well the merit function describes the desired properties of the lens. &nbsp;A designer will spend most of his effort defining, and refining, the exact statement of the problem. &nbsp;When a suitable merit function has been defined, the success of the optimization will depend mostly on the suitability of the starting point.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">In order to be efficient, the merit function should be as simple as possible, as long as no important item has been omitted.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">Let us assume that a suitable merit function has been defined, consisting of a set of quantities, each of which has a desired goal. &nbsp;These may include ray intercept errors, the focal length, etc. &nbsp;We will designate the current values of this set of quantities by the array Ai, and the set of target values by the array Ti. &nbsp;Then the aberrations fi may be defined as</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine" style="text-indent: 48px;"><span class="f_mine" style="font-weight: bold;">fi = Ai-Ti.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">We define the merit function</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span style="width:48px">&nbsp;</span><span class="f_mine" style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial'; font-weight: bold;">&Phi;</span><span class="f_mine" style="font-weight: bold;"> = </span><span class="f_mine" style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial'; font-weight: bold;">&Sigma;</span><span class="f_mine" style="font-weight: bold;"> ( wi fi ) ** 2</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">where </span><span class="f_mine" style="font-weight: bold;">wi</span><span class="f_mine"> is the relative weighting assigned to the ith aberration. &nbsp;If the design parameters </span><span class="f_mine" style="font-weight: bold;">Xj</span><span class="f_mine"> are allowed to change, the value of </span><span class="f_mine" style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial'; font-weight: bold;">&Phi;</span><span class="f_mine"> will be altered. &nbsp;Since a perfect design cannot often be achieved, the goal of the program is to find the set of design variables that will yield the lowest possible value of </span><span class="f_mine" style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial'; font-weight: bold;">&Phi;.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">To find a minimum of </span><span class="f_mine" style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial'; font-weight: bold;">&Phi;</span><span class="f_mine"> with respect to the </span><span class="f_mine" style="font-weight: bold;">Xj</span><span class="f_mine">, we define</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><img src="um10f1.png" width="464" height="113" alt="um10f1" style="width:464px;height:113px;border:none"></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">Since a minimum of </span><span class="f_mine" style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial'; font-weight: bold;">&Phi;</span><span class="f_mine"> represents a stationary point of </span><span class="f_mine" style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial'; font-weight: bold;">&Phi;</span><span class="f_mine"> with respect to the </span><span class="f_mine" style="font-weight: bold;">X</span><span class="f_mine">, we need to find a solution for which </span><span class="f_mine" style="font-weight: bold;">G</span><span class="f_mine"> = 0. &nbsp;Writing a Taylor's series for </span><span class="f_mine" style="font-weight: bold;">G</span><span class="f_mine">, we get</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><img src="um10f2.png" width="173" height="71" alt="um10f2" style="width:173px;height:71px;border:none"></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">The required change in the design variable </span><span class="f_mine" style="font-weight: bold;">Xj</span><span class="f_mine"> is therefore </span><span class="f_mine" style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial'; font-weight: bold;">&Delta;</span><span class="f_mine" style="font-weight: bold;">Xj</span><span class="f_mine">, in the limit of the first two terms in the Taylor's series. &nbsp;Due to the neglect of higher-order terms in the expansion, the solution </span><span class="f_mine" style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial'; font-weight: bold;">&Delta;</span><span class="f_mine" style="font-weight: bold;">Xj</span><span class="f_mine"> is not usually the optimum, but is instead an improvement. &nbsp;Several iterations are usually needed to find the true minimum solution.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">An exact solution of the above equations requires knowledge of Ljk, which is composed of the terms</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><img src="um10f3.png" width="307" height="120" alt="um10f3" style="width:307px;height:120px;border:none"></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">The first derivatives of fi are computed in SYNOPSYS by taking finite differences. &nbsp;In theory, higher-order derivatives should also be calculated, but this is not done because it would be very time consuming. &nbsp;Most DLS programs approximate the </span><span class="f_mine" style="font-style: italic;">homogeneous</span><span class="f_mine"> second derivatives by use of a so-called &quot;damping factor&quot; which is a single number added to each of the diagonal terms of the matrix </span><span class="f_mine" style="font-weight: bold;">L</span><span class="f_mine">. &nbsp;This damping has the effect of reducing the size of the </span><span class="f_mine" style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial'; font-weight: bold;">&Delta;</span><span class="f_mine" style="font-weight: bold;">X</span><span class="f_mine">, and helps to keep the solution in the region of approximate linearity. &nbsp;SYNOPSYS, on the other hand attempts to solve for a better approximation to the homogeneous second derivatives by calculating</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><img src="um10f4.png" width="344" height="98" alt="um10f4" style="width:344px;height:98px;border:none"></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">at each iteration starting with the second. &nbsp;This process results in a different damping factor for each variable, and those that are more linear are damped less than the others. (This approximation comes from considering the statistically expected effects of the </span><span class="f_mine" style="font-style: italic;">inhomogeneous</span><span class="f_mine"> second partial derivatives -- see </span><span class="f_mine" style="text-decoration: underline;"><a href="umch10.htm#um10l1" class="topiclink">Ref (1)</a></span><span class="f_mine">.) &nbsp;The PSD algorithm has an unexpected advantage over methods that actually calculate the second derivative – and which are somewhat slower. &nbsp;Because the process utilizes the change in first derivatives from one pass to the next, the influence of </span><span class="f_mine" style="font-style: italic;">all</span><span class="f_mine"> higher-order derivatives is accounted for, at least in part, as well as the influence of the </span><span class="f_mine" style="font-style: italic;">mixed</span><span class="f_mine"> second derivatives, to some extent.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">Since the first iteration does not yet have any record of the change in derivatives, it cannot implement the PSD method at that time. &nbsp;The first pass will utilize either the standard DLS method, if switch 82 is off – or a more powerful method that involves numeric second derivatives, calculated with finite differences, if it is on. &nbsp;In this case, the default damping factor is changed to 0.01 instead of the default value of 1.0.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">A considerable improvement in the convergence of SYNOPSYS usually results from the use of the pseudo-second derivatives. &nbsp;However, should it ever happen that the mixed second derivatives were especially large, the approximation to SCDR would not be accurate; if such a case is ever suspected, the use of the approximation can be suppressed by turning switch 8 off, resulting in the ordinary DLS solution. &nbsp;We cannot remember ever seeing such a case, though.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p><span style="width:48px">&nbsp;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="font-size: 11pt; font-family: 'Times New Roman'; text-decoration: underline;"><a href="um1011.htm" class="topiclink">Next</a></span><span style="font-size: 11pt; font-family: 'Times New Roman';"> </span><span style="font-size: 11pt; font-family: 'Times New Roman'; text-decoration: underline;"><a href="um.htm#um_contents" class="topiclink">TOC</a></span><span style="font-size: 11pt; font-family: 'Times New Roman';"> </span></p>

<!--ZOOMSTOP-->
</div></div>
<script type="text/javascript">


</script>
</body>
</html>
