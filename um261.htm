<!DOCTYPE HTML>
<html>
<head>
   <title>um261</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="Pupil,Pupil rotation of,real pupil" />
   <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />   
   
   <meta http-equiv="X-UA-Compatible" content="IE=8" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <link type="text/css" href="custom.css" rel="stylesheet">

   <style TYPE="text/css" media="screen"> 
      html, body { margin:0; 
             padding:0; 
             overflow: hidden; 
             background: #FFFFFF; 
       } 
html {
  overflow-x: auto; overflow-y: scroll;
}
      div#printheader { display: none; }
      #idheader { width:100%; 
                  height:auto; 
                  padding: 0; 
                  margin: 0; 
       } 
      #idcontent { position:relative }                                               
      #callout-table, #overview-table {display:block; position:relative; top:0; left:0;}
      #callout-icon {display:block; position:absolute; top:-11px; left:-11px;}
      #callout-icon-flag {display:block; position:absolute; top:-11px; left:-8px;}
      #callout-table a {text-decoration: none; color: blue;}
      #callout-table a:visited {text-decoration: none; color: blue;}
      #overview-table a {text-decoration: none; color: black;}
      #overview-table a:visited {text-decoration: none; color: black;}
      #callout-table a:hover, #overview-table a:hover {text-decoration: underline;}      
      #switchtoggles { text-align: right; padding: 0 5px 0 0; font-size: 90%; } 
      p.help-url { margin: 20px 0 5px 0; text-align: center; font-size: 80%; text-decoration: none }
      .sync-toc { color: #ffffff; font-size: 8pt; font-weight: bold; display: none; }
      .sync-toc a { color: #ffffff; text-decoration: none; font-weight: bold;}
      .sync-toc a:visited { color: #ffffff; }
      .sync-toc a:hover { text-decoration: underline; }

   </style>
   <noscript>
   <style type="text/css">
   html, body { overflow: auto; }
   </style> 
   </noscript>
   <style type="text/css" media="print">
      span.f_Heading1 { color: black; }
      #idheader, #printheader img { display:none; }
      #printheader { display: block; margin-top: 20px; }
      #idcontent { margin-top: 10px; position:relative }
   </style>   

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>
   <script type="text/javascript" src="nsh.js"></script>
<!--[if lt IE 7]>
<style type="text/css">
  #idcontent {padding: 0px;} 
  #innerdiv {padding: 10px 5px 5px 10px ;} 
</style> 
<![endif]-->



</head>
<body>


<div id="idcontent"><div id="innerdiv">
<!--ZOOMRESTART-->
<p class="p_mine"><span class="f_mine" style="font-weight: bold;">2.6.1 Real pupil option &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="f_mine" style="font-family: 'Times New Roman'; text-decoration: underline;"><a href="um26.htm" class="topiclink">Previous</a></span><span class="f_mine" style="font-family: 'Times New Roman';"> </span><span class="f_mine" style="font-family: 'Times New Roman'; text-decoration: underline;"><a href="um262.htm" class="topiclink">Next</a></span><span class="f_mine" style="font-family: 'Times New Roman';"> </span><span class="f_mine" style="font-family: 'Times New Roman'; text-decoration: underline;"><a href="um.htm#um_contents" class="topiclink">TOC</a></span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">In lenses with a significant amount of pupil aberration, a real ray traced at the paraxial coordinate YP1 may not go through the center of the stop. &nbsp;The </span><span class="f_mine" style="font-style: italic;">real pupil</span><span class="f_mine"> option is then required, and that option will iteratively find the ray that actually hits the center anytime a chief ray is needed. &nbsp;It controls only the position of the chief ray, not the pupil size. &nbsp;(If the stop surface has a </span><span class="f_mine" style="font-style: italic;">decentered</span><span class="f_mine"> user-entered </span><span class="f_mine" style="text-decoration: underline;"><a href="um331.htm#cao" class="topiclink">CAO</a></span><span class="f_mine">, then it finds the ray that passes through the center of </span><span class="f_mine" style="font-style: italic;">that</span><span class="f_mine"> aperture, not the vertex of the surface.)</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">If the pupil of the lens is distorted or vignetted and is therefore not circular, the chief ray found by the real pupil option may not be what you want; a more sophisticated option is then called for. &nbsp;This is the wide-angle pupil option, of which there are three forms, WAP 1 through 3, described in </span><span class="f_mine" style="text-decoration: underline;"><a href="um263.htm" class="topiclink">Section 2.6.3</a></span><span class="f_mine">. &nbsp;These control both the pupil size and chief-ray position.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">The chief ray that is used as a reference for image quality analysis is usually the same ray as described above, unless the ICR selection gives a different pupil coordinate (see </span><span class="f_mine" style="text-decoration: underline;"><a href="um32.htm" class="topiclink">3.2</a></span><span class="f_mine">), the </span><span class="f_mine" style="text-decoration: underline;"><a href="um10311.htm#vset" class="topiclink">VSET</a></span><span class="f_mine"> parameter specifies a decenter of the pupil, or a </span><span class="f_mine" style="text-decoration: underline;"><a href="um32.htm#vfield" class="topiclink">VFIELD</a></span><span class="f_mine"> is in effect. </span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p><a name="protate"></a><span class="f_mine">In order for the </span><span class="f_mine" style="text-decoration: underline;"><a href="um263.htm" class="topiclink">WAP</a></span><span class="f_mine"> features to work with skew field points (GBAR not equal to 0) some remapping of the pupil is required. &nbsp;The WAP features reduce the pupil size according to a search algorithm that adjusts the X and Y size of the pupil for field points in the meridional plane. &nbsp;But suppose you want to examine the image at a skew field point. &nbsp;In that case, the correct pupil geometry will usually be an ellipse that is </span><span class="f_mine" style="font-style: italic;">rotated</span><span class="f_mine"> with respect to the Y axis. &nbsp;To model this correctly, whenever the real pupil is in effect, any ray sent into the lens, including any generated in a grid by many analysis features, is given a coordinate rotation first. &nbsp;The result is that, if you, say, trace a ray at XEN = 1 and YEN = 0, which would normally be either to the left or right of the chief ray, if the field point is not in the meridional plane the point will be rotated with respect to the chief ray along with all other rays in the pattern. &nbsp;To illustrate this point, consider the input below:</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">PER 10 -90 10 1 2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">PLOT &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">RED &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">RAY P .707 0 1 .707 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">BLUE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">RAY P .707 0 -1 .707 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">LIME &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">RAY P .707 1 0 .707 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">MAGENTA &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">RAY P .707 -1 0 .707 </span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">PUP 3 50</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">CYAN</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">TRA P -.707 -.707 50 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">END &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p>
<p>&nbsp;</p>
<p class="p_mine"><span class="f_mine">Here, we create a</span><span class="f_mine" style="text-decoration: underline;"><a href="um72.htm#per" class="topiclink"> PER</a></span><span class="f_mine"> drawing of the first element of a lens, looking almost down the axis, and then show some rays on the drawing. &nbsp;This lens has a circular field of view (CFOV) plus WAP 3, and we trace four rays at a skew field point (0.707, 0.707) at the top, bottom, and sides of the pupil. &nbsp;The rays are drawn in color so you can identify them. &nbsp;Then we create a circle of rays outlining the pupil at the opposite field point, in cyan. &nbsp;The result is shown below.</span></p>
<p class="p_mine"><img src="um2f8.png" width="397" height="329" alt="um2f8" style="width:397px;height:329px;border:none"></p>
<p class="p_mine"><span class="f_mine">Notice that the cyan circle is actually an oval, since the WAP 3 pupil is reduced in size to just clear all apertures, and the oval is rotated correctly. &nbsp;Now look at the four ray paths in the lower left. &nbsp;The ray drawn in red comes from the </span><span class="f_mine" style="font-style: italic;">top</span><span class="f_mine"> of the pupil, formally, but the entire pattern has been rotated by 135 degrees for that field point, putting that ray at about the 7:30 point. &nbsp;The other rays are rotated as well, so that the vignetted pupil shape is accurately modeled everywhere in the field. &nbsp;This rotation applies whenever a real pupil is in effect.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">Since one often wants to control the path of a given ray through the system, it is important to know which ray one is controlling. &nbsp;The pupil rotation just described can in some cases mean that the one you ask for may not be where you expected. &nbsp;Consider the drawings below.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><img src="urr1.png" width="404" height="284" alt="urr1" style="width:404px;height:284px;border:none"></p>
<p class="p_mine"><img src="urr2.png" width="389" height="302" alt="urr2" style="width:389px;height:302px;border:none"></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">There is a simple way to keep things straight: &nbsp;Open the PAD display, ask for a lens drawing if it is not already there, and press the</span><span class="f_mine" style="font-weight: bold;"> F7</span><span class="f_mine"> or </span><span class="f_mine" style="font-weight: bold;">F8 </span><span class="f_mine">key. &nbsp;The F7 key will show only the lower rim ray, and F8 will show the upper. &nbsp;This simple check tells you which ray goes where in the lens.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">If you change the sign of the object point YPP0 or UPP0, then be aware that the field point you are analyzing has also changed sign.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">The rotation of the entrance pupil discussed in this section only applies when a real pupil is in effect. &nbsp;With a paraxial pupil, the pupil is never rotated.</span></p>
<p class="p_p2-10"><span class="f_p2-10">&nbsp;</span></p>
<p><span style="font-size: 11pt; font-family: 'Times New Roman';">  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-size: 11pt; font-family: 'Times New Roman'; text-decoration: underline;"><a href="um262.htm" class="topiclink">Next</a></span><span style="font-size: 11pt; font-family: 'Times New Roman';"> </span><span style="font-family: 'Times New Roman'; text-decoration: underline;"><a href="um26.htm" class="topiclink">P</a></span><span style="font-size: 11pt; font-family: 'Times New Roman'; text-decoration: underline;"><a href="um26.htm" class="topiclink">revious</a></span><span style="font-size: 11pt; font-family: 'Times New Roman';"> </span><span style="font-size: 11pt; font-family: 'Times New Roman'; text-decoration: underline;"><a href="um.htm#um_contents" class="topiclink">TOC</a></span></p>

<!--ZOOMSTOP-->
</div></div>
<script type="text/javascript">


</script>
</body>
</html>
