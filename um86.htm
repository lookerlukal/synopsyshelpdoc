<!DOCTYPE HTML>
<html>
<head>
   <title>um86</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="diffraction image analysis, general,FNUM: forcing value,image analysis,image analysis diffraction-based" />
   <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />   
   
   <meta http-equiv="X-UA-Compatible" content="IE=8" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <link type="text/css" href="custom.css" rel="stylesheet">

   <style TYPE="text/css" media="screen"> 
      html, body { margin:0; 
             padding:0; 
             overflow: hidden; 
             background: #FFFFFF; 
       } 
html {
  overflow-x: auto; overflow-y: scroll;
}
      div#printheader { display: none; }
      #idheader { width:100%; 
                  height:auto; 
                  padding: 0; 
                  margin: 0; 
       } 
      #idcontent { position:relative }                                               
      #callout-table, #overview-table {display:block; position:relative; top:0; left:0;}
      #callout-icon {display:block; position:absolute; top:-11px; left:-11px;}
      #callout-icon-flag {display:block; position:absolute; top:-11px; left:-8px;}
      #callout-table a {text-decoration: none; color: blue;}
      #callout-table a:visited {text-decoration: none; color: blue;}
      #overview-table a {text-decoration: none; color: black;}
      #overview-table a:visited {text-decoration: none; color: black;}
      #callout-table a:hover, #overview-table a:hover {text-decoration: underline;}      
      #switchtoggles { text-align: right; padding: 0 5px 0 0; font-size: 90%; } 
      p.help-url { margin: 20px 0 5px 0; text-align: center; font-size: 80%; text-decoration: none }
      .sync-toc { color: #ffffff; font-size: 8pt; font-weight: bold; display: none; }
      .sync-toc a { color: #ffffff; text-decoration: none; font-weight: bold;}
      .sync-toc a:visited { color: #ffffff; }
      .sync-toc a:hover { text-decoration: underline; }

   </style>
   <noscript>
   <style type="text/css">
   html, body { overflow: auto; }
   </style> 
   </noscript>
   <style type="text/css" media="print">
      span.f_Heading1 { color: black; }
      #idheader, #printheader img { display:none; }
      #printheader { display: block; margin-top: 20px; }
      #idcontent { margin-top: 10px; position:relative }
   </style>   

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>
   <script type="text/javascript" src="nsh.js"></script>
<!--[if lt IE 7]>
<style type="text/css">
  #idcontent {padding: 0px;} 
  #innerdiv {padding: 10px 5px 5px 10px ;} 
</style> 
<![endif]-->



</head>
<body>


<div id="idcontent"><div id="innerdiv">
<!--ZOOMRESTART-->
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p><span style="font-size: 14pt;">8.6 Diffraction Analysis &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span> <span style="text-decoration: underline;"><a href="um861.htm" class="topiclink">Next</a></span> <span style="text-decoration: underline;"><a href="um8513.htm" class="topiclink">Previous</a></span> <span style="text-decoration: underline;"><a href="um.htm#um_contents" class="topiclink">TOC</a></span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">Many of the diffraction image analysis features described in this section may be run interactively from the dialog </span><span class="f_mine" style="font-weight: bold;">MDI</span><span class="f_mine"> or its links. &nbsp;All of them evaluate the image by tracing geometric rays up to the exit pupil, and then performing the desired analysis on this pupil and its accompanying wavefront. &nbsp;A separate feature, described in </span><span class="f_mine" style="text-decoration: underline;"><a href="um96.htm" class="topiclink">Section 9.6</a></span><span class="f_mine">, can do diffractive propagaion within a lens system. &nbsp;This is used, for example, to examine what happens when a beam passes through a small pinhole, and diffractive effects then alter the paths of rays thereafter.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">The diffraction analysis programs described in this section work in three steps: in the first, the requested number of rays is traced to determine the vignetted entrance pupil, as is done in the geometric programs. &nbsp;In the second, the physical exit pupil is determined by giving the final ray positions and angles a series of coordinate transformations which yield the individual ray intersections with a reference sphere whose (0, 0) coordinate is the point intersected by a line normal to the focal surface at the chief-ray point in the primary color. &nbsp;The effects of pupil foreshortening, pupil aberrations, and obliquity of the focal surface are taken into account in this step. &nbsp;The output from this operation includes a listing of three transformation angles (in radians), an obliquity factor, which is the cosine of the angle of incidence at the image, and the image F/number as determined by the angle between the upper and lower rim rays (ignoring vignetting). &nbsp;The three angles correspond to the ALPHA, BETA, and GAMMA tilts required to rotate from the optical axis to the image surface normal. </span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">For </span><span class="f_mine" style="text-decoration: underline;"><a href="um32.htm#afocal" class="topiclink">AFOCAL</a></span><span class="f_mine"> systems, the quantity printed as F/NUMBER is equal to one-half of the final beam radius, and the obliquity factor is set to unity. &nbsp;The three angles in this case rotate from the optical axis to the chief ray.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><a name="86for"></a><span class="f_mine">The third step involves evaluating the Kirchhoff diffraction integral over this exit pupil to obtain the diffraction point-spread function, sampled at intervals of 0.205 times the radius of the Airy disk. &nbsp;The convolution MTF features do not involve this integration, since that analysis is performed directly on the aberrated exit pupil. &nbsp;This image description is then evaluated by the requested program, or stored for use by the programs </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;"><a href="um93.htm#for" class="topiclink">FOR</a></span><span class="f_mine"> and </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;"><a href="um92.htm#detector" class="topiclink">DET</a></span><span class="f_mine">. &nbsp;For reference, those programs that sample the diffraction pattern also print the (X, Y) coordinates of the principal ray at the image, measured from the chief ray coordinate in the primary color, as “</span><span class="f_mine" style="font-weight: bold;">LATERAL COLOR IN X, Y</span><span class="f_mine">”. &nbsp;The radius of the Airy disk is taken to be</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine" style="text-indent: 48px;"><span class="f_mine" style="font-weight: bold;">RAD = 1.22 </span><span class="f_mine" style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial'; font-weight: bold;">&lambda; </span><span class="f_mine" style="font-weight: bold;">(F/number) / INDEX</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">where </span><span class="f_mine" style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial'; font-weight: bold;">&lambda;</span><span class="f_mine"> is the wavelength and </span><span class="f_mine" style="font-weight: bold;">INDEX</span><span class="f_mine"> refers to the final medium. &nbsp;Note that the first dark ring in the diffraction pattern from a perfect circular aperture is located at </span><span class="f_mine" style="font-weight: bold;">RAD</span><span class="f_mine">. </span><a name="debye"></a><span class="f_mine">Switch 66 controls the location of the diffracting aperture; if this switch is ON, the latter is taken at the next-to-last surface, and if this switch is OFF, the aperture (and OPD calculation) is projected to infinity, giving the Debye approximation. &nbsp;This is the default, which is recommended unless specific care is exercised in defining the system.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">If switch 50 is ON (see </span><span class="f_mine" style="text-decoration: underline;"><a href="um29.htm" class="topiclink">2.9</a></span><span class="f_mine">), the diffraction-based programs will print a table of the rays and OPD's used.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">When analyzing the diffraction pattern, the program calculates the intensity over a grid of points extending out to either 6 or 12 times the radius of the Airy disk in the primary (or requested) color. &nbsp;The default area is 6 times, but if the image is poorly corrected it is necessary to sample further out. &nbsp;Where the wider option is available, it is indicated by a “W” in front of the command mnemonic. &nbsp;This option also requires a finer grid of rays, to prevent aliasing in the image – since the next diffraction order will be closer to the edge of the sample area. &nbsp;For these reasons, the wide option usually takes at least 16 times longer to process.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">If the peak-to-peak wavefront error exceeds about two waves, the program will print a warning message, and you are advised to use the geometric programs or the wide option for such cases. &nbsp;In general, the geometric and diffraction programs give similar results for images in which the OPD error is between one and two waves. &nbsp;If the error is less than two waves, the diffraction programs should be used; if more than two waves, the geometric programs should be used instead. &nbsp;The </span><span class="f_mine" style="font-style: italic;">convolution</span><span class="f_mine"> MTF analysis programs, on the other hand, are accurate for all wavefront errors – although a very poor image requires analysis at a very low frequency and can take a long time to run.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">Note that, since the obliquity of the chief ray with the focal surface is taken into account when generating the diffraction pattern, if the image falls on a curved surface it is calculated as it would appear looking </span><span class="f_mine" style="font-style: italic;">perpendicularly</span><span class="f_mine"> at the surface. &nbsp;This is distinct from the geometrical analysis, in which only the X and Y coordinates of the image are considered.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">For </span><span class="f_mine" style="text-decoration: underline;"><a href="um32.htm#afocal" class="topiclink">AFOCAL</a></span><span class="f_mine"> systems the image is evaluated as though a perfect lens with a focal length of 1.00 were inserted in the final beam; for MTF analysis, the frequencies are given in cycles per milliradian, instead of cycles per millimeter.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">You should specify a sufficient number of rays so that the final vignetted pupil contains from 400 to 20,000 rays. &nbsp;For most purposes, about 600 rays are adequate. &nbsp;If in doubt, examine the </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;"><a href="um862.htm#psprd" class="topiclink">PSPRD</a></span><span class="f_mine"> plot to see if there are any signs of aliasing, as shown below.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><img src="alias.png" width="590" height="467" alt="alias" style="width:590px;height:467px;border:none"></p>
<p class="p_mine"><span class="f_mine">Example image calculated with too few rays, aliasing evident.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><a name="86perf"></a><span class="f_mine">It is sometimes convenient to evaluate the system with </span><span class="f_mine" style="font-weight: bold;">all of the OPD errors set to zero</span><span class="f_mine">. &nbsp;This lets you see the influence of obscurations and vignetting without the additional effect of wavefront errors. &nbsp;To do so, simply turn on switch 25 before doing the image analysis.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">In addition to the features described below, a more general image dissection program is described in </span><span class="f_mine" style="text-decoration: underline;"><a href="um911.htm" class="topiclink">section 9.1.1</a></span><span class="f_mine" style="font-family: 'Times New Roman';">.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><a name="86fn"></a><span class="f_mine">The image-space F/number, mentioned above, is calculated by tracing a few rays at the 0.2 zone and then extrapolating to find the ray angle at the edge of the pupil. &nbsp;(This is to avoid inaccuracies due to possible ray failures or caustics at the edge of the pupil.)  </span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">It is also possible to override the default calculation with the command</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span style="width:48px">&nbsp;</span><span class="f_mine" style="font-weight: bold;">FORCE FNUM </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;">FN</span><span class="f_mine" style="font-family: 'Times New Roman'; font-weight: bold;">,</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">which is entered before the diffraction-evaluation command. &nbsp;Thus, for example, if your lens has two concentric zones with different focal lengths, then the F/numbers of those zones may be different, and the default value may not be appropriate for both. This input will control the sample spacing and the default cutoff frequency used by the diffraction analysis routines. &nbsp;For AFOCAL systems, the entered </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;">FN</span><span class="f_mine"> is &frac12; of the paraxial YA at the next-to-last surface, while for FOCAL lenses it is just the desired F/number.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p><span style="width:48px">&nbsp;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="font-size: 11pt; font-family: 'Times New Roman'; text-decoration: underline;"><a href="um861.htm" class="topiclink">Next</a></span><span style="font-size: 11pt; font-family: 'Times New Roman';"> </span><span style="font-size: 11pt; font-family: 'Times New Roman'; text-decoration: underline;"><a href="um.htm#um_contents" class="topiclink">TOC</a></span><span style="font-size: 11pt; font-family: 'Times New Roman';"> </span></p>

<!--ZOOMSTOP-->
</div></div>
<script type="text/javascript">


</script>
</body>
</html>
