<!DOCTYPE HTML>
<html>
<head>
   <title>um122</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />   
   
   <meta http-equiv="X-UA-Compatible" content="IE=8" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <link type="text/css" href="custom.css" rel="stylesheet">

   <style TYPE="text/css" media="screen"> 
      html, body { margin:0; 
             padding:0; 
             overflow: hidden; 
             background: #FFFFFF; 
       } 
html {
  overflow-x: auto; overflow-y: scroll;
}
      div#printheader { display: none; }
      #idheader { width:100%; 
                  height:auto; 
                  padding: 0; 
                  margin: 0; 
       } 
      #idcontent { position:relative }                                               
      #callout-table, #overview-table {display:block; position:relative; top:0; left:0;}
      #callout-icon {display:block; position:absolute; top:-11px; left:-11px;}
      #callout-icon-flag {display:block; position:absolute; top:-11px; left:-8px;}
      #callout-table a {text-decoration: none; color: blue;}
      #callout-table a:visited {text-decoration: none; color: blue;}
      #overview-table a {text-decoration: none; color: black;}
      #overview-table a:visited {text-decoration: none; color: black;}
      #callout-table a:hover, #overview-table a:hover {text-decoration: underline;}      
      #switchtoggles { text-align: right; padding: 0 5px 0 0; font-size: 90%; } 
      p.help-url { margin: 20px 0 5px 0; text-align: center; font-size: 80%; text-decoration: none }
      .sync-toc { color: #ffffff; font-size: 8pt; font-weight: bold; display: none; }
      .sync-toc a { color: #ffffff; text-decoration: none; font-weight: bold;}
      .sync-toc a:visited { color: #ffffff; }
      .sync-toc a:hover { text-decoration: underline; }

   </style>
   <noscript>
   <style type="text/css">
   html, body { overflow: auto; }
   </style> 
   </noscript>
   <style type="text/css" media="print">
      span.f_Heading1 { color: black; }
      #idheader, #printheader img { display:none; }
      #printheader { display: block; margin-top: 20px; }
      #idcontent { margin-top: 10px; position:relative }
   </style>   

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>
   <script type="text/javascript" src="nsh.js"></script>
<!--[if lt IE 7]>
<style type="text/css">
  #idcontent {padding: 0px;} 
  #innerdiv {padding: 10px 5px 5px 10px ;} 
</style> 
<![endif]-->



</head>
<body>


<div id="idcontent"><div id="innerdiv">
<!--ZOOMRESTART-->
<p class="p_mine" style="border-color: #000000; border-style: solid; border-width: 0px; border-top: none; border-right: none; border-left: none; margin: 0px 0px 1px 0px;"><span class="f_mine" style="font-size: 14pt;">12.2 BTOL Image quality evaluation &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="f_mine" style="font-family: 'Times New Roman'; text-decoration: underline;"><a href="um123.htm" class="topiclink">Next</a></span><span class="f_mine" style="font-family: 'Times New Roman';"> </span><span class="f_mine" style="font-family: 'Times New Roman'; text-decoration: underline;"><a href="um1214.htm" class="topiclink">Previous</a></span><span class="f_mine" style="font-family: 'Times New Roman';"> </span><span class="f_mine" style="font-family: 'Times New Roman'; text-decoration: underline;"><a href="um.htm#um_contents" class="topiclink">TOC</a></span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">Ideally, if one were to tolerance a lens based on some description of image quality, the analysis should include a large number of rays at many field points and colors, and one should re-evaluate the lens as each variable was perturbed by several different increments in order to obtain sufficient information to describe the effects of that variable by means of a power-series expansion containing all of the relevant derivatives. &nbsp;However, such a process would be prohibitively expensive.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">For this reason there have been attempts to find shortcuts and approximations which will give reasonably accurate tolerances without the cost of that kind of analysis. &nbsp;One method currently in use is to obtain the derivative of the OPD with respect to each design variable by an algebraic method as each of a set of rays is traced. &nbsp;This method provides very rapid evaluation of the derivatives but relies on the assumption that the OPD error is a second-order function of the perturbation.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">However, I have seen examples of lenses for which this approach is not adequate. &nbsp;As long as the change of each variable is extremely small the assumption is all right, but when the effects of adjustments are considered, the changes quickly become large enough so that higher-order effects become significant. &nbsp;The algebraic method gives a good approximation to the piston error, wavefront tilt, and defocus, but when these are eliminated by change of reference point and focal shift, the higher-order wavefront changes become the major source of image degradation, and these are not given by the algebraic approximation.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">The program </span><span class="f_mine" style="font-weight: bold;">BTOL</span><span class="f_mine"> avoids this difficulty by evaluating the quality descriptors and the first and second derivatives by the finite difference method rather than algebraically. &nbsp;The implied assumption in the case of </span><span class="f_mine" style="font-weight: bold;">BTOL</span><span class="f_mine"> is that these two derivatives are sufficient to predict the quality for other values of the variable. &nbsp;While this is itself imprecise, it has an advantage over the algebraic method in that the assumptions are conservative: the finite differences are taken at the extreme tolerance, defined by the </span><span class="f_mine" style="font-weight: bold;">RANGE</span><span class="f_mine"> input, rather than at the nominal design, so the ill effects of any unsuspected higher-order terms are present in the evaluation. &nbsp;The final tolerances are therefore interpolations over this range rather than extrapolations from the nominal design.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">The disadvantage of this method, of course, is that it is more time consuming. &nbsp;In order to minimize the time, the wavefront is reduced to either a power-series or a Zernike polynomial, and the image quality is determined by interpolating a grid of rays over this polynomial. &nbsp;The form of the power-series polynomial is the same as that given in </span><span class="f_mine" style="text-decoration: underline;"><a href="um94.htm" class="topiclink">section 9.4</a></span><span class="f_mine">, and it gives an accurate value of the variance of the wavefront provided that the higher-order aberrations are not excessive. &nbsp;(The MTF-based quality descriptors will utilize the linear spline. &nbsp;See </span><span class="f_mine" style="text-decoration: underline;"><a href="um12134.htm" class="topiclink">Section 12.1.3.4</a></span><span class="f_mine">.) &nbsp;The coefficients are determined by a least-squares fit to a pattern of 21 rays, distributed as shown in the figure below.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><img src="um12f6.png" width="273" height="189" alt="um12f6" style="width:273px;height:189px;border:none"></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">The interpolation option is in principle more accurate, but requires from 5 to 10 times longer to run. &nbsp;In practice, the results from BTOL are almost always the same either way.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">The ray grid over which the pupil is sampled for quality analysis is by default a 30x30 grid, but user input can specify any </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;"><a href="um121.htm#bgrid" class="topiclink">grid</a></span><span class="f_mine"> from 10x10 to 80x80.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine" style="font-weight: bold;">BTOL </span><span class="f_mine">examines the ray grid with the nominal lens at each field point in the primary color, and discards any rays that are vignetted or obscured. &nbsp;Rays affected by apodization are assigned a weight according to the transmission along that ray (but polarization is not considered.)  </span><span class="f_mine" style="font-weight: bold;">BTOL</span><span class="f_mine"> also honors all of the pupil options, including the </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;"><a href="um32.htm#vfield" class="topiclink">VFIELD</a></span><span class="f_mine"> data, if any. &nbsp;This ray set is then employed for all colors at that field point during the BTOL run – ignoring the possibility that the pupil itself may change with color and with BTOL adjustments. &nbsp;This simplification is necessary owing to the significant increase in running time required were it to update the pupil mask continuously, and the rarity of cases where this assumption might not be valid.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">It is good practice to evaluate the lens with the </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;"><a href="umch8.htm#image" class="topiclink">IMAGE</a></span><span class="f_mine"> options before utilizing </span><span class="f_mine" style="font-weight: bold;">BTOL</span><span class="f_mine">, in order to determine the initial state of correction and the nominal values of the quality descriptors. &nbsp;This is easily done with the </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;"><a href="um8632.htm#mtf" class="topiclink">ZMTF</a></span><span class="f_mine">, </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;"><a href="um856.htm#rms" class="topiclink">RMS</a></span><span class="f_mine"> and </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;"><a href="um868.htm#variance" class="topiclink">VARIANCE</a></span><span class="f_mine"> commands. &nbsp;The resulting spot or wavefront variance should be similar to that calculated by </span><span class="f_mine" style="font-weight: bold;">BTOL</span><span class="f_mine" style="font-family: 'Times New Roman';">.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">Because the ray pattern used for the IMAGE analysis may not correspond exactly to that in BTOL, and because the latter employs an interpolation algorithm to estimate the image quality after tracing but a few rays, the initial quality descriptor of </span><span class="f_mine" style="font-weight: bold;">BTOL</span><span class="f_mine"> may vary somewhat from that given by the IMAGE programs, and it is safer to use the </span><span class="f_mine" style="font-weight: bold;">EVALUATE</span><span class="f_mine"> option of </span><span class="f_mine" style="font-weight: bold;">BTOL</span><span class="f_mine"> to determine the initial quality descriptors if a strict correlation is needed.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">To verify the statistics of the final </span><span class="f_mine" style="font-weight: bold;">BTOL</span><span class="f_mine"> budget, a Monte-Carlo option is available, described in </span><span class="f_mine" style="text-decoration: underline;"><a href="um125.htm" class="topiclink">section 12.5</a></span><span class="f_mine" style="font-family: 'Times New Roman';">.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p><span style="width:48px">&nbsp;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="font-size: 11pt; font-family: 'Times New Roman'; text-decoration: underline;"><a href="um123.htm" class="topiclink">Next</a></span><span style="font-size: 11pt; font-family: 'Times New Roman';"> </span><span style="font-size: 11pt; font-family: 'Times New Roman'; text-decoration: underline;"><a href="um.htm#um_contents" class="topiclink">TOC</a></span><span style="font-size: 11pt; font-family: 'Times New Roman';"> </span></p>

<!--ZOOMSTOP-->
</div></div>
<script type="text/javascript">


</script>
</body>
</html>
