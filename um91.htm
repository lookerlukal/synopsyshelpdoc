<!DOCTYPE HTML>
<html>
<head>
   <title>um91</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="DMODEL, options,GMODE, options,image analysis,image analysis creating a model" />
   <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />   
   
   <meta http-equiv="X-UA-Compatible" content="IE=8" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <link type="text/css" href="custom.css" rel="stylesheet">

   <style TYPE="text/css" media="screen"> 
      html, body { margin:0; 
             padding:0; 
             overflow: hidden; 
             background: #FFFFFF; 
       } 
html {
  overflow-x: auto; overflow-y: scroll;
}
      div#printheader { display: none; }
      #idheader { width:100%; 
                  height:auto; 
                  padding: 0; 
                  margin: 0; 
       } 
      #idcontent { position:relative }                                               
      #callout-table, #overview-table {display:block; position:relative; top:0; left:0;}
      #callout-icon {display:block; position:absolute; top:-11px; left:-11px;}
      #callout-icon-flag {display:block; position:absolute; top:-11px; left:-8px;}
      #callout-table a {text-decoration: none; color: blue;}
      #callout-table a:visited {text-decoration: none; color: blue;}
      #overview-table a {text-decoration: none; color: black;}
      #overview-table a:visited {text-decoration: none; color: black;}
      #callout-table a:hover, #overview-table a:hover {text-decoration: underline;}      
      #switchtoggles { text-align: right; padding: 0 5px 0 0; font-size: 90%; } 
      p.help-url { margin: 20px 0 5px 0; text-align: center; font-size: 80%; text-decoration: none }
      .sync-toc { color: #ffffff; font-size: 8pt; font-weight: bold; display: none; }
      .sync-toc a { color: #ffffff; text-decoration: none; font-weight: bold;}
      .sync-toc a:visited { color: #ffffff; }
      .sync-toc a:hover { text-decoration: underline; }

   </style>
   <noscript>
   <style type="text/css">
   html, body { overflow: auto; }
   </style> 
   </noscript>
   <style type="text/css" media="print">
      span.f_Heading1 { color: black; }
      #idheader, #printheader img { display:none; }
      #printheader { display: block; margin-top: 20px; }
      #idcontent { margin-top: 10px; position:relative }
   </style>   

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>
   <script type="text/javascript" src="nsh.js"></script>
<!--[if lt IE 7]>
<style type="text/css">
  #idcontent {padding: 0px;} 
  #innerdiv {padding: 10px 5px 5px 10px ;} 
</style> 
<![endif]-->



</head>
<body>


<div id="idcontent"><div id="innerdiv">
<!--ZOOMRESTART-->
<p class="p_mine" style="border-color: #000000; border-style: solid; border-width: 0px; border-top: none; border-right: none; border-left: none; margin: 0px 0px 1px 0px;"><span class="f_mine">&nbsp;</span></p>
<p><a name="model"></a><span class="f_mine" style="font-size: 14pt;">9.1 Generating the Image Model</span><span class="f_mine" style="font-family: 'Times New Roman';">  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="f_mine" style="font-family: 'Times New Roman'; text-decoration: underline;"><a href="um911.htm" class="topiclink">Next</a></span><span class="f_mine" style="font-family: 'Times New Roman';"> </span><span class="f_mine" style="font-family: 'Times New Roman'; text-decoration: underline;"><a href="umch9.htm#um90" class="topiclink">Previous</a></span><span class="f_mine" style="font-family: 'Times New Roman';"> </span><span class="f_mine" style="font-family: 'Times New Roman'; text-decoration: underline;"><a href="um.htm#um_contents" class="topiclink">TOC</a></span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">An image model may be prepared with the dialog </span><span class="f_mine" style="font-weight: bold;">MMO</span><span class="f_mine"> for later analysis with the dialog </span><span class="f_mine" style="font-weight: bold;">MID</span><span class="f_mine"> or with the </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;"><a href="um93.htm#for" class="topiclink">FOR</a></span><span class="f_mine"> command. &nbsp;The command-mode input needed to create the image model is given below.</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine" style="font-weight: bold;">GMODEL { </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;">ICOL</span><span class="f_mine" style="font-weight: bold;"> / M / P } </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;">HBAR</span><span class="f_mine" style="font-weight: bold;"> </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;">NRYS</span><span class="f_mine" style="font-weight: bold;"> </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;">WT</span><span class="f_mine" style="font-weight: bold;"> </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;">GBAR</span><span class="f_mine" style="font-weight: bold;"> [ ADD [ AXIS ] ]</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine" style="font-weight: bold;">DMODEL { </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;">ICOL</span><span class="f_mine" style="font-weight: bold;"> / M / P } </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;">HBAR</span><span class="f_mine" style="font-weight: bold;"> </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;">NRYS</span><span class="f_mine" style="font-weight: bold;"> 0 </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;">GBAR</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine" style="font-weight: bold;">WMODEL { </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;">ICOL</span><span class="f_mine" style="font-weight: bold;"> / M / P } </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;">HBAR</span><span class="f_mine" style="font-weight: bold;"> </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;">NRYS</span><span class="f_mine" style="font-weight: bold;"> 0 </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;">GBAR</span><span class="f_mine" style="font-weight: bold;">.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 42px;"><table cellspacing="0" cellpadding="4" border="0" style="border:none; border-spacing:0px; border-collapse:collapse;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:94px; padding:4px; border:solid 1px #000000;"><p class="p_mine"><span class="f_mine" style="font-weight: bold; text-decoration: underline;">ICOL</span></p>
</td>
<td style="vertical-align:top; width:376px; padding:4px; border:solid 1px #000000;"><p class="p_mine"><span class="f_mine">is the color number , “</span><span class="f_mine" style="font-weight: bold;">M</span><span class="f_mine">” requests a multicolor analysis, and “</span><span class="f_mine" style="font-weight: bold;">P</span><span class="f_mine">” just the primary color.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:94px; padding:4px; border:solid 1px #000000;"><p class="p_mine"><span class="f_mine" style="font-weight: bold; text-decoration: underline;">HBAR</span></p>
</td>
<td style="vertical-align:top; width:376px; padding:4px; border:solid 1px #000000;"><p class="p_mine"><span class="f_mine">is the fractional Y-object height</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:94px; padding:4px; border:solid 1px #000000;"><p class="p_mine"><span class="f_mine" style="font-weight: bold; text-decoration: underline;">GBAR</span></p>
</td>
<td style="vertical-align:top; width:376px; padding:4px; border:solid 1px #000000;"><p class="p_mine"><span class="f_mine">is the fractional X-object height</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:94px; padding:4px; border:solid 1px #000000;"><p class="p_mine"><span class="f_mine" style="font-weight: bold; text-decoration: underline;">NRYS</span></p>
</td>
<td style="vertical-align:top; width:376px; padding:4px; border:solid 1px #000000;"><p class="p_mine"><span class="f_mine">is the number of rays to be traced to define the image. &nbsp;(Note that </span><span class="f_mine" style="font-weight: bold; text-decoration: underline;">NRYS</span><span class="f_mine"> does not impact the relative weights of the several images.)</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:94px; padding:4px; border:solid 1px #000000;"><p class="p_mine"><span class="f_mine" style="font-weight: bold;">[ADD[AXIS]]</span></p>
</td>
<td style="vertical-align:top; width:376px; padding:4px; border:solid 1px #000000;"><p class="p_mine"><span class="f_mine">See </span><span class="f_mine" style="text-decoration: underline;"><a href="um912.htm" class="topiclink">Section 9.1.2</a></span><span class="f_mine">.</span></p>
</td>
</tr>
</table>
</div>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">There are several ways to prepare the image model. &nbsp;The simplest is to ask for a single-color model, which can be either a spot diagram (created by the </span><span class="f_mine" style="font-weight: bold;">GMODEL</span><span class="f_mine"> command) or a diffraction point-spread function (created with </span><span class="f_mine" style="font-weight: bold;">DMODEL</span><span class="f_mine">).</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine"> A multicolor model will be generated if </span><span class="f_mine" style="font-weight: bold;">M</span><span class="f_mine"> is input instead of a color number. &nbsp;In this case the model represents a single object point as seen in several colors, and the relative weighting is given by the WT1 and WT2 data in the lens file,</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">If </span><span class="f_mine" style="text-decoration: underline;"><a href="um29.htm" class="topiclink">switch 17</a></span><span class="f_mine"> is on, the </span><span class="f_mine" style="font-weight: bold;">DMODEL</span><span class="f_mine"> will also make a listing of the sampled values. </span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><img src="um9f2.png" width="510" height="324" alt="um9f2" style="width:510px;height:324px;border:none"></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">In the above figures, the quantity RAD is the radius of the diffraction-limited Airy disk for the optical system.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">The area sampled for the DMODEL is the same as for the </span><span class="f_mine" style="text-decoration: underline;"><a href="um862.htm#psprd" class="topiclink">PSPRD</a></span><span class="f_mine">. &nbsp;The wide-area model (</span><span class="f_mine" style="font-weight: bold;">WMODEL</span><span class="f_mine">) samples out to twice this area, or about 12 times the radius of the Airy disk. &nbsp;It is therefore more accurate, although it also takes longer to run and requires more rays to avoid aliasing. &nbsp;It also produces some extra output, described below. &nbsp;Here is an example of the use of this feature:</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine" style="font-weight: bold;">WMODEL Example</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">We want to evaluate the resolution of an astronomical telescope by finding the fraction of the energy in the image of a star that falls on a single CCD pixel. &nbsp;First we must make sure that the ray grid we plan to use is fine enough to prevent aliasing over the wide sample area. &nbsp;This is best done with the WPSPRD command, and the resulting picture shows that the edges of the sample area are free of higher diffraction orders when 800 rays are requested.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><img src="dobrelay1.png" width="577" height="457" alt="dobrelay1" style="width:577px;height:457px;border:none"></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">Then we run the WMODEL command in order to see the extra information it puts into the </span><span class="f_mine" style="text-decoration: underline;"><a href="um15123.htm" class="topiclink">file buffer</a></span><span class="f_mine">. &nbsp;When it has finished, type BUFFER? &nbsp;(</span><span class="f_mine" style="text-decoration: underline;"><a href="umch15.htm#ai" class="topiclink">AI</a></span><span class="f_mine"> mode has to be on for this to work.)</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p><span style="font-size: 9pt; font-family: 'Courier New'; font-weight: bold;">IMAGE&gt;BUFFER? </span></p>
<p><span style="font-size: 9pt; font-family: 'Courier New'; font-weight: bold;">&nbsp;</span></p>
<p><span style="font-size: 9pt; font-family: 'Courier New'; font-weight: bold;"> The current FILE BUFFER contains</span></p>
<p><span style="font-size: 9pt; font-family: 'Courier New'; font-weight: bold;"> &nbsp; 1 &nbsp; &nbsp; 749.00000000 &nbsp;RAY GRID</span></p>
<p><span style="font-size: 9pt; font-family: 'Courier New'; font-weight: bold;"> &nbsp; 2 &nbsp; &nbsp; 724.00000000 &nbsp;RAYS THRU</span></p>
<p><span style="font-size: 9pt; font-family: 'Courier New'; font-weight: bold;"> &nbsp; 3 &nbsp; &nbsp; &nbsp; 1.00000000 &nbsp;RAY TRANS.</span></p>
<p><span style="font-size: 9pt; font-family: 'Courier New'; font-weight: bold;"> &nbsp; 4 &nbsp; &nbsp; &nbsp; 0.96662216 &nbsp;LENS TRANS.</span></p>
<p><span style="font-size: 9pt; font-family: 'Courier New'; font-weight: bold;"> &nbsp; 5 &nbsp; 1.01994100E+07 &nbsp;TINT</span></p>
<p><span style="font-size: 9pt; font-family: 'Courier New'; font-weight: bold;"> &nbsp; 6 &nbsp; &nbsp; &nbsp; 0.02628794 &nbsp;PEAK</span></p>
<p><span style="font-size: 9pt; font-family: 'Courier New'; font-weight: bold;"> &nbsp; 7 &nbsp;-7.16666439E-13 &nbsp;X CENTROID</span></p>
<p><span style="font-size: 9pt; font-family: 'Courier New'; font-weight: bold;"> &nbsp; 8 &nbsp; &nbsp; &nbsp;-0.00005187 &nbsp;Y CENTROID</span></p>
<p><span style="font-size: 9pt; font-family: 'Courier New'; font-weight: bold;"> &nbsp; 9 &nbsp; &nbsp; &nbsp;-0.00004011 &nbsp;PEAK(X)</span></p>
<p><span style="font-size: 9pt; font-family: 'Courier New'; font-weight: bold;"> &nbsp; 10 &nbsp; &nbsp; &nbsp;-0.00004011 &nbsp;PEAK(Y)</span></p>
<p>&nbsp;</p>
<p class="p_mine"><span class="f_mine">Here you see that 96.7% of the input energy gets through the system, the rest lost by vignetting at the secondary mirror. &nbsp;We also need the location of the peak of the diffraction pattern, because that is where we want to position the center of the CCD pixel. &nbsp;This number is in file location 10.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">Now we make a MACro with the following lines:</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">WMODEL P AIP 800 </span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">! total transmission:</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">Z1 = FILE 4</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">! is peak Y-coordinate</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">Z2 = FILE 10</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">OV5</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">DET RECT .000354 .000354 0 Z2</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">Z3 = FILE 1</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">= Z3/Z1</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">ORD = FILE 1</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">Run this MACro once, to check for input errors and to put a copy into the computer’s memory. &nbsp;(Or, you can do just the latter by clicking on the button </span><img src="loadthismacro.png" width="23" height="25" alt="loadthismacro" style="width:23px;height:25px;border:none"><span class="f_mine">.) &nbsp;Then type</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">DO MACRO FOR AIP = 0 TO 1</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">The program loops over the value of </span><span class="f_mine" style="text-decoration: underline;"><a href="um15121.htm" class="topiclink">AIP</a></span><span class="f_mine">, for each case calculating the image model and filling the file buffer as before. &nbsp;Then it runs the </span><span class="f_mine" style="text-decoration: underline;"><a href="um92.htm" class="topiclink">DETECTOR</a></span><span class="f_mine"> feature, where we specify a rectangular detector with the dimensions of the CCD pixel and give it a Y-location that is at the peak of the model, with the variable Z2.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">We are not quite done, however. &nbsp;The DETECTOR calculation gives us the fraction of the </span><span class="f_mine" style="font-style: italic;">input</span><span class="f_mine"> energy that falls on the pixel – but we want the fraction of the transmitted energy, not the incident energy, for this example. &nbsp;So we pick up the DET result in Z3 and divide it by the total transmission, which we had put into Z1 earlier. &nbsp;The result, assigned to the ordinate of the plot, is the number we are after. &nbsp;Now we assign the scale factor we want and give the program new axis labels (assuming that the defaults were not what we were after) with the MACro</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">ALAB = 'REDUCED FIELD'</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">OLAB = 'PIXEL FRACTION'</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">SCALE = .2 BY .2</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">ORIGIN = 0, 0</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">AGAIN</span></p>
<p class="p_mine" style="margin: 0px 0px 0px 48px;"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">and here is our picture:</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><img src="dobrelay2.png" width="450" height="642" alt="dobrelay2" style="width:450px;height:642px;border:none"></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p class="p_mine"><span class="f_mine">If the system were put in </span><span class="f_mine" style="text-decoration: underline;"><a href="umch17.htm#polarization" class="topiclink">polarization</a></span><span class="f_mine"> mode, the transmission result would also have included reflection losses at the surfaces, with coatings accounted for.</span></p>
<p class="p_mine"><span class="f_mine">&nbsp;</span></p>
<p><span style="width:48px">&nbsp;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="font-size: 11pt; font-family: 'Times New Roman'; text-decoration: underline;"><a href="um911.htm" class="topiclink">Next</a></span><span style="font-size: 11pt; font-family: 'Times New Roman';"> </span><span style="font-size: 11pt; font-family: 'Times New Roman'; text-decoration: underline;"><a href="um.htm#um_contents" class="topiclink">TOC</a></span><span style="font-size: 11pt; font-family: 'Times New Roman';"> </span></p>

<!--ZOOMSTOP-->
</div></div>
<script type="text/javascript">


</script>
</body>
</html>
