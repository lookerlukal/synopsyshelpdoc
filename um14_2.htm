<!DOCTYPE HTML>
<html>
<head>
   <title>um14.2</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="ENM; environmental model,environment model" />
   <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />   
   
   <meta http-equiv="X-UA-Compatible" content="IE=8" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <link type="text/css" href="custom.css" rel="stylesheet">

   <style TYPE="text/css" media="screen"> 
      html, body { margin:0; 
             padding:0; 
             overflow: hidden; 
             background: #FFFFFF; 
       } 

      div#printheader { display: none; }
      #idheader { width:100%; 
                  height:auto; 
                  padding: 0; 
                  margin: 0; 
       } 
      #idcontent { position:relative }                                               
      #callout-table, #overview-table {display:block; position:relative; top:0; left:0;}
      #callout-icon {display:block; position:absolute; top:-11px; left:-11px;}
      #callout-icon-flag {display:block; position:absolute; top:-11px; left:-8px;}
      #callout-table a {text-decoration: none; color: blue;}
      #callout-table a:visited {text-decoration: none; color: blue;}
      #overview-table a {text-decoration: none; color: black;}
      #overview-table a:visited {text-decoration: none; color: black;}
      #callout-table a:hover, #overview-table a:hover {text-decoration: underline;}      
      #switchtoggles { text-align: right; padding: 0 5px 0 0; font-size: 90%; } 
      p.help-url { margin: 20px 0 5px 0; text-align: center; font-size: 80%; text-decoration: none }
      .sync-toc { color: #ffffff; font-size: 8pt; font-weight: bold; display: none; }
      .sync-toc a { color: #ffffff; text-decoration: none; font-weight: bold;}
      .sync-toc a:visited { color: #ffffff; }
      .sync-toc a:hover { text-decoration: underline; }

   </style>
   <noscript>
   <style type="text/css">
   html, body { overflow: auto; }
   </style> 
   </noscript>
   <style type="text/css" media="print">
      span.f_Heading1 { color: black; }
      #idheader, #printheader img { display:none; }
      #printheader { display: block; margin-top: 20px; }
      #idcontent { margin-top: 10px; position:relative }
   </style>   

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>
   <script type="text/javascript" src="nsh.js"></script>
<!--[if lt IE 7]>
<style type="text/css">
  #idcontent {padding: 0px;} 
  #innerdiv {padding: 10px 5px 5px 10px ;} 
</style> 
<![endif]-->



</head>
<body>


<div id="printheader"><h1 class="p_Heading1"><span class="f_Heading1">um14.2</span></h1>
</div>
<div id="idheader">
<div id="idheaderbg">
<table style="width:100%;border:none;margin:0px;background:url(background-topic-header.jpg)" cellspacing="0" cellpadding="0"> 
  <tr valign="bottom">
    <td align="left" valign="bottom" class="topichead">
   
   <p class="crumbs" id="idnav"><b>Navigation:</b>&nbsp;
   &raquo;No topics above this level&laquo;
   </p>
   <h1 class="p_Heading1"><span class="f_Heading1">um14.2</span></h1>

    </td>
    <td align="right" width="120" valign="middle" class="topichead" id="idnav">
    
     <img src="hm_btn_navigate_prev_d.png" border="0"
        ><a href="main_index.htm"
        onmouseover="document.images.main.src='hm_btn_navigate_top_orange.png'" 
        onmouseout="document.images.main.src='hm_btn_navigate_top.png'"><img name=main src="hm_btn_navigate_top.png" border=0 alt="Return to chapter overview"
        ></a><img src="hm_btn_navigate_next_d.png" border="0">
    </td>
  </tr>  
</table>
<!-- The following code displays Expand All/Collapse All links  below the header in topics containing toggles -->
  
</div>
</div>  

<div id="idcontent"><div id="innerdiv">
<!--ZOOMRESTART-->
<p><span style="font-size: 14pt;">14.2. &nbsp;Environmental system model (ENM) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-size: 11pt; font-family: 'Times New Roman'; text-decoration: underline;"><a href="um1412.htm" class="topiclink">Previous</a></span><span style="font-size: 11pt; font-family: 'Times New Roman';"> </span><span style="font-size: 11pt; font-family: 'Times New Roman'; text-decoration: underline;"><a href="um.htm#um_contents" class="topiclink">TOC</a></span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">While </span><span style="font-size: 11pt; font-weight: bold; text-decoration: underline;"><a href="um141.htm" class="topiclink">TOSP</a></span><span style="font-size: 11pt;"> can calculate the effects of surface and index perturbations on the image, it has two limitations: &nbsp;It is only correct in the limit of small changes, and the results can only be used by a few of the image analysis programs. &nbsp;The changes implemented by ENM, on the other hand are applied to lenses directly, so all analysis can see the results. The changes can be applied to any surface that is currently spherical or a Zernike surface, and any medium that is not AIR. Input for surface deformations is as follows:</span></p>
<p>&nbsp;</p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-size: 11pt; font-weight: bold;">ENM</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-size: 11pt; font-weight: bold;">DATA</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-size: 11pt; font-weight: bold; text-decoration: underline;">ISN</span><span style="font-size: 11pt; font-weight: bold;"> </span><span style="font-size: 11pt; font-weight: bold; text-decoration: underline;">JSN</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-size: 11pt; font-weight: bold; text-decoration: underline;">A1</span><span style="font-size: 11pt; font-weight: bold;"> </span><span style="font-size: 11pt; font-weight: bold; text-decoration: underline;">A2</span><span style="font-size: 11pt; font-weight: bold;"> </span><span style="font-size: 11pt; font-weight: bold; text-decoration: underline;">A3</span><span style="font-size: 11pt; font-weight: bold;"> ... </span><span style="font-size: 11pt; font-weight: bold; text-decoration: underline;">A9</span></p>
<p style="margin: 0px 0px 0px 24px;">&nbsp;</p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-size: 11pt; font-weight: bold;">DATA</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-size: 11pt; font-weight: bold; text-decoration: underline;">ISN</span><span style="font-size: 11pt; font-weight: bold;"> </span><span style="font-size: 11pt; font-weight: bold; text-decoration: underline;">JZN</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-size: 11pt; font-weight: bold; text-decoration: underline;">A1</span><span style="font-size: 11pt; font-weight: bold;"> </span><span style="font-size: 11pt; font-weight: bold; text-decoration: underline;">A2</span><span style="font-size: 11pt; font-weight: bold;"> </span><span style="font-size: 11pt; font-weight: bold; text-decoration: underline;">A3</span><span style="font-size: 11pt; font-weight: bold;"> ... </span><span style="font-size: 11pt; font-weight: bold; text-decoration: underline;">A9</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-size: 11pt; font-weight: bold;">...</span></p>
<p style="margin: 0px 0px 0px 24px;">&nbsp;</p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-size: 11pt; font-weight: bold;">END</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">If </span><span style="font-size: 11pt; font-weight: bold; text-decoration: underline;">JZN</span><span style="font-size: 11pt;"> = 1, the data define a surface deformation; JZN = 2 defines an index perturbation that is modeled as a special type of GRIN element..</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">For surface deformations, the terms A1 through A9 apply to the same polynomial as used by TOSP:</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 12pt;">DZ = Al + A2R**2 + A3R**4 + A4R**6 + A5X + A6Y + A7X**2 + A8Y**2 + A9XY</span></p>
<p>&nbsp;</p>
<p style="margin: 7px 0px 7px 0px;"><span style="font-size: 12pt;">where R**2 = X**2 + Y**2.</span></p>
<p style="margin: 7px 0px 7px 0px;"><span style="color: #000000;">&nbsp;</span></p>
<p style="margin: 7px 0px 7px 0px;"><span style="font-size: 12pt;">For index changes, the terms are:</span></p>
<p style="margin: 7px 0px 7px 0px;"><span style="font-size: 12pt;">DN = A1*R**2 + A2*R**4 + A3*R**6 + A4*X + A5*Y + A6*X**2 + A7*Y**2 + A8*X*Y</span></p>
<p style="margin: 7px 0px 7px 0px;"><span style="font-size: 12pt;">The program creates an array of points covering surface </span><span style="font-size: 12pt; font-weight: bold; text-decoration: underline;">ISN</span><span style="font-size: 12pt;">, the dimensions determined by the current size and location of the clear aperture assigned to that surface. &nbsp;For each point, it calculates the current surface sag (without perturbations) and the change in the Z-coordinate of each of those points as given by the polynomial above. &nbsp;The surface is declared a ZERNIKE surface if it is not already.</span></p>
<p style="margin: 7px 0px 7px 0px;"><span style="font-size: 12pt;">Then it submits an optimization run, varying all of the Zernike terms and targetting the sag at each point so it equals the nominal sag plus the perturbation. &nbsp;The accuracy of the fit can be determined by examining the final value of the merit function, and the individual fit errors can be examined with the command FINAL. &nbsp;To use this feature, </span><span style="font-size: 12pt; font-weight: bold;">all nine A values must be present on the line</span><span style="font-size: 12pt;">.</span></p>
<p style="margin: 7px 0px 7px 0px;"><span style="font-size: 12pt;">When it is finished, the surface should model the perturbed surface to high accuracy.  </span></p>
<p style="margin: 7px 0px 7px 0px;"><span style="font-size: 12pt;">For modeling </span><span style="font-size: 12pt; font-weight: bold;">index perturbations</span><span style="font-size: 12pt;">, </span><span style="font-size: 12pt; font-weight: bold; text-decoration: underline;">JZN</span><span style="font-size: 12pt;"> must be 2, and the program defines the current lens as a </span><span style="font-size: 12pt; font-weight: bold; text-decoration: underline;"><a href="um_3342.htm" class="topiclink">GRIN ENM</a></span><span style="font-size: 12pt;">, picks up the current index values, and adds terms A2 to A9 to the GRIN definition. &nbsp;In this case, as for all GRINS, the system must have exactly one or three wavelengths defined. &nbsp;Input for index perturbations is as follows (note there is no A1 term here, since that is taken from the current index values):</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-size: 11pt; font-weight: bold;">DATA</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-size: 11pt; font-weight: bold;">ISN </span><span style="font-size: 11pt; font-weight: bold; text-decoration: underline;">JZN</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-size: 11pt; font-weight: bold;">A2 A3 A4 A5</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-size: 11pt; font-weight: bold;">A6 A7 A8 A9</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-size: 11pt; font-weight: bold;">...</span></p>
<p style="margin: 0px 0px 0px 24px;">&nbsp;</p>
<p style="margin: 7px 0px 7px 0px;"><span style="font-size: 12pt;">Here is an example. &nbsp;We start with the relay telescope in 4.RLE, and apply term A9, which is an astigmatism term, to surface 1, the primary mirror. Then it calculates the fringes in the on-axis wavefront with these perturbations taken into acccount.  </span></p>
<p style="margin: 7px 0px 7px 0px;"><img src="clip0394.png" width="979" height="591" alt="clip0394" style="width:979px;height:591px;border:none"></p>
<p style="margin: 7px 0px 7px 0px;"><span style="font-size: 12pt;">Here is that input:</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="background-color: #ffffff;">GET 4</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="background-color: #ffffff;">CHG</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="background-color: #ffffff;">NTOP</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="background-color: #ffffff;">END</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="background-color: #ffffff;">ENM</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="background-color: #ffffff;">DATA</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="background-color: #ffffff;">1 1</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="background-color: #ffffff;">0 0 0 0 0 0 0 0 1.0E-7</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="background-color: #ffffff;">END</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="background-color: #ffffff;">&nbsp;</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="background-color: #ffffff;">FRINGES &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="background-color: #ffffff;">PUPIL P 0 0 5 0 0 0&nbsp;</span></p>
<p style="margin: 0px 0px 0px 24px;">&nbsp;</p>
<p style="margin: 7px 0px 7px 0px;"><span style="font-size: 12pt;">The fit error is very small (according to the merit function), and the plot shows the resulting wavefront. </span></p>
<p style="margin: 7px 0px 7px 0px;"><img src="clip0390.png" width="820" height="610" alt="clip0390" style="width:820px;height:610px;border:none"></p>
<p style="margin: 7px 0px 7px 0px;"><span style="font-size: 12pt;">To see the difference between the perturbed and nominal surface, which has a radius of -98.85 inches, use</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-weight: bold;">ADEF 1 FRING 0 -98.85</span></p>
<p style="margin: 0px 0px 0px 24px;">&nbsp;</p>
<p><img src="clip0401.png" width="804" height="597" alt="clip0401" style="width:804px;height:597px;border:none"></p>
<p style="margin: 7px 0px 7px 0px;"><span style="font-size: 12pt;">To see the shape of the emerging wavefront, use</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-weight: bold; background-color: #ffffff;">PUPIL P 0 0 1 0 0 0&nbsp;</span><span style="background-color: #ffffff;">&nbsp;</span></p>
<p>&nbsp;</p>
<p><img src="clip0392.png" width="823" height="606" alt="clip0392" style="width:823px;height:606px;border:none"></p>
<p style="margin: 7px 0px 7px 0px;"><span style="font-size: 12pt;">Here is an example where we model an index change, linear in Y, with term A6, on the lens element at surface 6:</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-weight: bold; background-color: #ffffff;">FET 4</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-weight: bold; background-color: #ffffff;">CHG</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-weight: bold; background-color: #ffffff;">NTOP</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-weight: bold; background-color: #ffffff;">END</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-weight: bold; background-color: #ffffff;">ENM</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-weight: bold; background-color: #ffffff;">DATA</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-weight: bold; background-color: #ffffff;">6 2</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-weight: bold; background-color: #ffffff;">0 0 0 0&nbsp;</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-weight: bold; background-color: #ffffff;">0.002 0 0 0</span></p>
<p style="margin: 0px 0px 0px 24px;">&nbsp;</p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-weight: bold; background-color: #ffffff;">END</span></p>
<p style="margin: 0px 0px 0px 24px;">&nbsp;</p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-weight: bold; background-color: #ffffff;">FRINGES &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></p>
<p style="margin: 0px 0px 0px 24px;"><span style="font-weight: bold; background-color: #ffffff;">PUPIL P 0 0 5 0 0 0</span><span style="background-color: #ffffff;">&nbsp;&nbsp;&nbsp;</span></p>
<p style="margin: 0px 0px 0px 24px;">&nbsp;</p>
<p style="margin: 0px 0px 0px 24px;"><img src="clip0393.png" width="817" height="607" alt="clip0393" style="width:817px;height:607px;border:none"></p>
<p style="margin: 7px 0px 7px 0px;"><span style="font-size: 12pt;">ENM should not be used on diffractive surfaces, such as HOEs, DOE, or USS shapes 16 and 20.</span></p>
<p style="margin: 7px 0px 7px 0px;"><span style="color: #000000;">&nbsp;</span></p>
<p style="margin: 7px 0px 7px 0px;"><span style="width:48px">&nbsp;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="font-size: 11pt; text-decoration: underline;"><a href="um.htm#um_contents" class="topiclink">TOC</a></span></p>
<p style="margin: 7px 0px 7px 0px;"><span style="color: #000000;">&nbsp;</span></p>

<!--ZOOMSTOP-->
</div></div>
<script type="text/javascript">

var lastSlashPos = document.URL.lastIndexOf("/") > document.URL.lastIndexOf("\\") ? document.URL.lastIndexOf("/") : document.URL.lastIndexOf("\\");
if( document.URL.substring(lastSlashPos + 1, lastSlashPos + 4).toLowerCase() != "~hh" )
{
 if (document.all) setTimeout(function() {nsrInit();},20); 
    else nsrInit();
 } 


</script>
</body>
</html>
