<!DOCTYPE HTML>
<html>
<head>
   <title>tmch3</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />   
   
   <meta http-equiv="X-UA-Compatible" content="IE=8" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <link type="text/css" href="custom.css" rel="stylesheet">

   <style TYPE="text/css" media="screen"> 
      html, body { margin:0; 
             padding:0; 
             overflow: hidden; 
             background: #FFFFFF; 
       } 
html {
  overflow-x: auto; overflow-y: scroll;
}
      div#printheader { display: none; }
      #idheader { width:100%; 
                  height:auto; 
                  padding: 0; 
                  margin: 0; 
       } 
      #idcontent { position:relative }                                               
      #callout-table, #overview-table {display:block; position:relative; top:0; left:0;}
      #callout-icon {display:block; position:absolute; top:-11px; left:-11px;}
      #callout-icon-flag {display:block; position:absolute; top:-11px; left:-8px;}
      #callout-table a {text-decoration: none; color: blue;}
      #callout-table a:visited {text-decoration: none; color: blue;}
      #overview-table a {text-decoration: none; color: black;}
      #overview-table a:visited {text-decoration: none; color: black;}
      #callout-table a:hover, #overview-table a:hover {text-decoration: underline;}      
      #switchtoggles { text-align: right; padding: 0 5px 0 0; font-size: 90%; } 
      p.help-url { margin: 20px 0 5px 0; text-align: center; font-size: 80%; text-decoration: none }
      .sync-toc { color: #ffffff; font-size: 8pt; font-weight: bold; display: none; }
      .sync-toc a { color: #ffffff; text-decoration: none; font-weight: bold;}
      .sync-toc a:visited { color: #ffffff; }
      .sync-toc a:hover { text-decoration: underline; }

   </style>
   <noscript>
   <style type="text/css">
   html, body { overflow: auto; }
   </style> 
   </noscript>
   <style type="text/css" media="print">
      span.f_Heading1 { color: black; }
      #idheader, #printheader img { display:none; }
      #printheader { display: block; margin-top: 20px; }
      #idcontent { margin-top: 10px; position:relative }
   </style>   

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>
   <script type="text/javascript" src="nsh.js"></script>
<!--[if lt IE 7]>
<style type="text/css">
  #idcontent {padding: 0px;} 
  #innerdiv {padding: 10px 5px 5px 10px ;} 
</style> 
<![endif]-->



</head>
<body>


<div id="idcontent"><div id="innerdiv">
<!--ZOOMRESTART-->
<p class="p_p1-2" style="text-align: center;"><span class="f_p1-2" style="font-size: 18pt; font-style: italic; font-weight: bold;">Chapter 3</span></p>
<p class="p_p1-2" style="text-align: center; border-color: #000000; border-style: solid; border-width: 0px; border-top: none; border-right: none; border-left: none; margin: 0px 0px 1px 0px;"><span class="f_p1-2" style="font-size: 18pt; font-weight: bold;">The Lens File</span></p>
<p class="p_p1-2" style="text-align: center;"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">Now that you have typed in the data for the triplet lens, let's back up a little and discuss some of the options that are frequently used in this type of input. &nbsp;First of all, I need to show the coordinate system and sign conventions, since these apply to nearly everything else. The basic coordinates are defined as follows:</span></p>
<p>&nbsp;</p>
<p><img src="clip0353_zoom87.png" width="823" height="525" alt="clip0353" style="width:823px;height:525px;border:none"></p>
<p>&nbsp;</p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">You have already seen one of the valid object descriptions, used for the triplet. &nbsp;This would be a good time to try the </span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold; text-decoration: underline;"><a href="hidd_sys.htm" class="topiclink">SYS</a></span><span class="f_p1-2" style="font-size: 11pt;"> dialog or the Object (</span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;"><a href="object_wizard_mow.htm" class="topiclink">MOW</a></span><span class="f_p1-2" style="font-size: 11pt;">) or</span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;"> </span><span class="f_p1-2" style="font-size: 11pt;">Pupil (</span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;"><a href="hidd_pupilwizard.htm" class="topiclink">MPW</a></span><span class="f_p1-2" style="font-size: 11pt;">) </span><span class="f_p1-2" style="font-size: 11pt;">wizards too, where the object coordinates may simply be entered into data boxes. &nbsp;The Wizards are especially helpful, since they bring together in one dialog most of the features that can influence the definition of the entrance pupil. &nbsp;Type </span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">MOW</span><span class="f_p1-2" style="font-size: 11pt;"> or </span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">MPW</span><span class="f_p1-2" style="font-size: 11pt;"> to access these features, or use the menu </span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">Wizard | Object Wizard</span><span class="f_p1-2" style="font-size: 11pt;"> &nbsp;or </span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">Wizard | Pupil Wizard</span><span class="f_p1-2" style="font-size: 11pt;"> or the buttons provided in the </span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold; text-decoration: underline;"><a href="hidd_sps2.htm#sps" class="topiclink">SPS</a></span><span class="f_p1-2" style="font-size: 11pt;"> and </span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold; text-decoration: underline;"><a href="worksheet.htm" class="topiclink">WorkSheet</a></span><span class="f_p1-2" style="font-size: 11pt;"> features.</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">By default, the X-dimension of the paraxial pupil is assumed to be the same as the Y-dimension, and if you ever want to enter a different dimension, you first have to turn off this assumption. &nbsp;This is done in the RLE or CHG file with the options</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span style="width:48px">&nbsp;</span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">RPUPIL &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="f_p1-2" style="font-size: 11pt;">(rectangular pupil)</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">or</span></p>
<p class="p_p1-2"><span style="width:48px">&nbsp;</span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">EPUPIL &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="f_p1-2" style="font-size: 11pt;">(elliptical pupil).</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">To turn the option back on, use</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span style="width:48px">&nbsp;</span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">CPUPIL &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="f_p1-2" style="font-size: 11pt;">(circular pupil).</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">Here is a chart showing some other descriptions that you can put into an RLE file, from which you must select one:</span></p>
<p class="p_footnotetext"><span class="f_footnotetext">&nbsp;</span></p>
<p class="p_footnotetext"><img src="clip0507.png" width="455" height="122" alt="clip0507" style="width:455px;height:122px;border:none"></p>
<p class="p_footnotetext"><span class="f_footnotetext">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">In addition, there is another set of object descriptions which requires two lines of input. You may choose one of the OBJECT options, followed by one of the REFERENCE options. These are shown below.</span></p>
<p class="p_footnotetext"><span class="f_footnotetext">&nbsp;</span></p>
<p class="p_footnotetext"><img src="tm3f3.png" width="377" height="127" alt="tm3f3" style="width:377px;height:127px;border:none"></p>
<p class="p_footnotetext"><span class="f_footnotetext">&nbsp;</span></p>
<p class="p_footnotetext"><span class="f_footnotetext" style="font-size: 11pt;">The quantities in the Y-Z plane are defined in the figure below.</span></p>
<p class="p_footnotetext"><span class="f_footnotetext">&nbsp;</span></p>
<p class="p_footnotetext"><img src="clip0356.png" width="984" height="471" alt="clip0356" style="width:984px;height:471px;border:none"></p>
<p class="p_footnotetext"><span class="f_footnotetext">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">As you can see on the chart, all arguments past the first three are optional on the OBB line. Look again at the input for the triplet lens, and identify the quantities entered. &nbsp;Format OBA is primarily used for finite objects, and OBG for Gaussian beam input, which we will skip for now. &nbsp;The quantities defined in the X-Z plane (indicated by an X in their name) follow the same geometry as those in the Y-Z plane. &nbsp;All of these selections except for OBD assume that the object is on a flat surface unless you give surface 0 a different shape.  </span></p>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">Regardless of which object input you select, the data provide some basic information that the program needs before it can trace rays. &nbsp;There are several other ways to define this information, some of which override the input on the object description, but you </span><span class="f_p1-2" style="font-size: 11pt; font-style: italic;">must </span><span class="f_p1-2" style="font-size: 11pt;">define, in some way, three fundamental quantities that are needed by the program: YPP0, YMP1, and YPP1.</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 42px;"><table cellspacing="0" cellpadding="4" border="0" style="border:none; border-spacing:0px; border-collapse:collapse;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:76px; padding:4px; border:solid 1px #000000;"><p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">YPP0</span></p>
</td>
<td style="vertical-align:top; width:412px; padding:4px; border:solid 1px #000000;"><p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">Object height</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:76px; padding:4px; border:solid 1px #000000;"><p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">YMP1</span></p>
</td>
<td style="vertical-align:top; width:412px; padding:4px; border:solid 1px #000000;"><p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">Axial marginal ray height on surface 1 vertex plane</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:76px; padding:4px; border:solid 1px #000000;"><p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">YPP1</span></p>
</td>
<td style="vertical-align:top; width:412px; padding:4px; border:solid 1px #000000;"><p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">Chief-ray height on surface 1 vertex plane</span></p>
</td>
</tr>
</table>
</div>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">When appropriate values of YMP1 and YPP0 have been arrived at, they are thereafter taken as the definition of &quot;full aperture&quot; and &quot;full field&quot; by all of the other options of SYNOPSYS. &nbsp;There is no default set of field angles that will be available for optimization or image analysis, as we mentioned earlier; you simply specify the desired fractional field height and aperture when you enter one of the commands involving raytracing. &nbsp;You therefore have access to as many field angles as you need, all the time. &nbsp;When the program calculates default clear apertures, it traces a few rays at the margins of the pupil and edges of the field and selects the largest aperture needed at each surface.</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">For very wide-angle lenses, where the input field may exceed 180 degrees, the object height would go to infinity if it were calculated at 90 degrees. &nbsp;So the </span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">OBD</span><span class="f_p1-2" style="font-size: 11pt;"> object format is used for these cases and the semi-field </span><span class="f_p1-2" style="font-size: 11pt; font-style: italic;">angle</span><span class="f_p1-2" style="font-size: 11pt;"> is specified instead of object height. The fractional field to be specified by all of the features of SYNOPSYS will then also refer to a fractional </span><span class="f_p1-2" style="font-size: 11pt; font-style: italic;">angle</span><span class="f_p1-2" style="font-size: 11pt;">, not a fractional linear height. &nbsp;This option gives the object a spherical curve with the vertex of surface 1 at the center.</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">In addition to the object description, there are a variety of optional ways to describe the aperture and field parameters, and this brings up the important subjects of </span><span class="f_p1-2" style="font-size: 11pt; font-style: italic;">real</span><span class="f_p1-2" style="font-size: 11pt;"> and </span><span class="f_p1-2" style="font-size: 11pt; font-style: italic;">paraxial</span><span class="f_p1-2" style="font-size: 11pt;"> rays, pupil definition, and stop locations. This is probably the single most complicated subject in SYNOPSYS since it deals with a complicated facet of optics. &nbsp;But once you understand the basics, you can always bring up the Object or Pupil Wizards to help you set up your lens properly.</span></p>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p1-2" style="border-color: #000000; border-style: solid; border-width: 0px; border-top: none; border-right: none; border-left: none; margin: 0px 0px 1px 0px;"><span class="f_p1-2">&nbsp;</span></p>
<p><a name="tm3l2"></a><span class="f_p1-2" style="font-size: 14pt;">Stops and Pupils</span></p>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">The figure below shows a schematic view of a hypothetical lens with a stop behind. The fundamental quantities are shown.</span></p>
<p class="p_footnotetext"><span class="f_footnotetext">&nbsp;</span></p>
<p class="p_footnotetext"><img src="clip0355.png" width="1008" height="511" alt="clip0355" style="width:1008px;height:511px;border:none"></p>
<p class="p_footnotetext"><span class="f_footnotetext">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">The ray that goes through the center of the stop surface is called a </span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">chief ray </span><span class="f_p1-2" style="font-size: 11pt;">(I also</span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;"> </span><span class="f_p1-2" style="font-size: 11pt;">use the term </span><span class="f_p1-2" style="font-size: 11pt; font-style: italic;">principal</span><span class="f_p1-2" style="font-size: 11pt;"> ray, when it is not in the primary color), and the position where this ray intercepts the plane tangent to the vertex of the first surface is the quantity YPP1. In the above picture, there are </span><span class="f_p1-2" style="font-size: 11pt; font-style: italic;">two</span><span class="f_p1-2" style="font-size: 11pt;"> rays shown, paraxial and real. &nbsp;When the program traces any ray it must first know where to aim it; to trace the full-field chief ray, for example, it would aim the ray at the point whose coordinate is YPP1. &nbsp;This value can be defined in a variety of ways, and many lenses use the paraxial pupil solve, which is the simplest; but in that case – where the paraxial chief ray goes to the center of the stop – the path of a real ray, which will not necessarily follow the paraxial path, may very well miss the center.</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">In such a case one would like the program to calculate YPP1 from a </span><span class="f_p1-2" style="font-size: 11pt; font-style: italic;">real</span><span class="f_p1-2" style="font-size: 11pt;"> raytrace, which is a more time-consuming calculation done by an iterative method. &nbsp;This is done with the </span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">real pupil option</span><span class="f_p1-2" style="font-size: 11pt;">,</span><span class="f_p1-2" style="font-size: 11pt; font-style: italic;"> </span><span class="f_p1-2" style="font-size: 11pt;">described along with other pupil options in the next sections.</span></p>
<p class="p_footnotetext"><span class="f_footnotetext">&nbsp;</span></p>
<p class="p_footnotetext" style="border-color: #000000; border-style: solid; border-width: 0px; border-top: none; border-right: none; border-left: none; margin: 0px 0px 1px 0px;"><span class="f_footnotetext">&nbsp;</span></p>
<p><a name="tm3l3"></a><span class="f_footnotetext" style="font-size: 14pt;">Paraxial Pupil Options</span></p>
<p class="p_footnotetext"><span class="f_footnotetext">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">The simplest object description takes the entered values of the three quantities YPP0, YMP1, and YPP1, and considers them fixed. &nbsp;This is called the paraxial pupil approximation. &nbsp;The paraxial pupil has three other options, entered in the RLE or CHG file;</span></p>
<p style="text-align: justify;">&nbsp;</p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px -7px;"><table cellspacing="0" cellpadding="4" border="0" style="border:none; border-spacing:0px; border-collapse:collapse;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:47px; padding:4px; border:solid 1px #000000;"><p style="text-align: justify;"><span style="font-size: 11pt;">YPP1</span></p>
</td>
<td style="vertical-align:top; width:563px; padding:4px; border:solid 1px #000000;"><p style="text-align: justify;"><span style="font-size: 11pt;">can be calculated by a paraxial raytrace up to the center of the stop (input:</span><span style="font-size: 11pt; font-weight: bold;"> APS </span><span style="font-size: 11pt; font-weight: bold; text-decoration: underline;">SN</span><span style="font-size: 11pt;">).</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:47px; padding:4px; border:solid 1px #000000;"><p style="text-align: justify;"><span style="font-size: 11pt;">YMP1</span></p>
</td>
<td style="vertical-align:top; width:563px; padding:4px; border:solid 1px #000000;"><p style="text-align: justify;"><span style="font-size: 11pt;">can be calculated by a trace to the edge of the stop (input: </span><span style="font-size: 11pt; font-weight: bold;">FILLSTOP</span><span style="font-size: 11pt;">).</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:47px; padding:4px; border:solid 1px #000000;"><p style="text-align: justify;"><span style="font-size: 11pt;">YPP0</span></p>
</td>
<td style="vertical-align:top; width:563px; padding:4px; border:solid 1px #000000;"><p style="text-align: justify;"><span style="font-size: 11pt;">can be calculated by a trace to the edge of the image (input: </span><span style="font-size: 11pt; font-weight: bold;">FFIELD</span><span style="font-size: 11pt;">).</span></p>
</td>
</tr>
</table>
</div>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">Note that the last two options require a user-entered clear aperture on the stop or image surface, respectively. &nbsp;Each of these options has a corresponding real-ray option, for use when the paraxial version is not appropriate. &nbsp;These are the real pupil, the wide-angle pupil, and the OCALC command, discussed in the next sections.</span></p>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p5" style="border-color: #000000; border-style: solid; border-width: 0px; border-top: none; border-right: none; border-left: none; margin: 0px 0px 1px 0px;"><span class="f_p5">&nbsp;</span></p>
<p><a name="tm3l4"></a><span class="f_p5" style="font-size: 14pt;">Real-Ray Pupil Options</span></p>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">Several options affecting the pupil shape and position are based on real rays rather than paraxial rays. &nbsp;I have mentioned the real pupil option, which controls the position of the chief ray. &nbsp;This is specified by giving a </span><span class="f_p1-2" style="font-size: 11pt; font-style: italic;">negative</span><span class="f_p1-2" style="font-size: 11pt;"> surface number with the APS input in the RLE file, such as </span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2" style="text-indent: 48px;"><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">APS -3</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">which says there is a real stop on surface 3.  </span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">The program can control more than just the chief-ray position, and there are several features you can use to adjust things the way you want. &nbsp;Let us note here that SYNOPSYS does not utilize the &quot;ray aiming&quot; protocol found in some other optics codes. &nbsp;That approach manages entering rays by iterating each one so it goes to a designated spot on a regular grid of points at the stop surface. &nbsp;But that process is very slow because of all the iterating required, and not very accurate, since most lenses have at least some pupil aberration -- and the correct ray distribution at the stop is therefore not uniform and a corresponding adjustment has to be made if the image analysis is to be accurate. &nbsp;For those reasons, SYNOPSYS instead models the entrance pupil as an ellipse (or rectangle in some cases) and fills </span><span class="f_p1-2" style="font-size: 11pt; font-style: italic;">that</span><span class="f_p1-2" style="font-size: 11pt;"> with a uniform ray distribution. &nbsp;What shows up at the stop is thus correct, and since very little iterative searching is performed, it executes much more quickly. &nbsp;The task then, is for the program to find the entering beam shape. &nbsp;From then on, most other calculations simply aim rays at a designated point in </span><span class="f_p1-2" style="font-size: 11pt; font-style: italic;">that</span><span class="f_p1-2" style="font-size: 11pt;"> entrance</span><span class="f_p1-2" style="font-size: 11pt; font-style: italic;"> </span><span class="f_p1-2" style="font-size: 11pt;">pupil, with no iterating required. &nbsp;The options described in this section control how that pupil is defined.</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">Consider the lens shown below.</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><img src="clip0109.png" width="446" height="331" alt="clip0109" style="width:446px;height:331px;border:none"></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">This lens is currently assigned a paraxial pupil, and you can see two problems: the central ray from the edge of the field does not go through the center of the stop surface, number 7. &nbsp;In addition, the edge rays do not hit the edge of the stop, as one would like. &nbsp;Let us correct those problems in turn. &nbsp;First we turn on the real pupil option with</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 24px;"><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">CHG</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 24px;"><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">APS -7</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 24px;"><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">END</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><img src="clip0110.png" width="416" height="316" alt="clip0110" style="width:416px;height:316px;border:none"></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">Now the chief ray goes through the center of the stop, but the edge rays still do not. &nbsp;The lens at the moment has only soft apertures, and we have to assign a real aperture to surface 7. &nbsp;Then we will use one of the wide-angle pupil options, Wide-Angle Pupil number 2.</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 24px;"><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">CHG</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 24px;"><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">7 CFIX &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="f_p1-2" style="font-size: 11pt;">! this assigns a hard CAO equal to the soft CAO to surface 7.</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 24px;"><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">WAP 2 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="f_p1-2" style="font-size: 11pt;">! turn on the pupil option</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 24px;"><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">END</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 24px;"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><img src="clip0111.png" width="416" height="319" alt="clip0111" style="width:416px;height:319px;border:none"></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">Now the entrance pupil is properly defined, and the rays all go where they should.</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">There are other WAP options too. &nbsp;The first is called WAP 1, (for Wide Angle Pupil number 1), which simply tilts the pupil at every field angle so that it is perpendicular to the chief ray rather than to the optical axis. &nbsp;This does not involve any iterative searching.</span></p>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">The option WAP 2, which we used here, adjusts the value of YMP1 (and XMP1 in the X-Z plane) so the beam just hits the boundary of the stop clear aperture (which must be entered) at the top and bottom and both sides. &nbsp;The chief ray is then defined as the central ray in the resulting pupil, which is usually elliptical in shape, and in general it will not go exactly through the center of the stop surface due to the presence of pupil distortion. &nbsp;This option is more time consuming than the paraxial pupil since the search involves much iteration. &nbsp;It requires that the rays aimed at the edges of the stop surface physically trace up to the stop without total internal reflection, etc., but ignores other clear apertures. &nbsp;(After the pupil is so defined, however, other apertures can </span><span class="f_p1-2" style="font-size: 11pt; font-style: italic;">vignette</span><span class="f_p1-2" style="font-size: 11pt;"> rays if they are exceeded.)  </span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">The WAP 3 option is more complex still: it adjusts the height and width of the pupil to just clear the apertures of </span><span class="f_p1-2" style="font-size: 11pt; font-style: italic;">all</span><span class="f_p1-2" style="font-size: 11pt;"> surfaces and avoid ray failures. &nbsp;That option is best used after a lens has been completely designed, since the size of the entrance pupil might vary drastically during optimization, giving misleading results, and that is not a good idea. &nbsp;The pupil calculated by the WAP 2 and 3 options is assumed to be elliptical in shape unless the RPUPIL option is selected in the RLE file, making it rectangular. </span></p>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_footnotetext"><span class="f_footnotetext">&nbsp;</span></p>
<p><a name="tm3l5"></a><span class="f_p1-2" style="font-size: 14pt;">Vignetting</span></p>
<p>&nbsp;</p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">All of the above has dealt with the definition of the entrance pupil, which is the image of the stop as seen in object space. &nbsp;In general, a lens will possess clear apertures on other surfaces besides the stop, and these can vignette the beam as well.</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">As mentioned in </span><span class="f_p1-2" style="font-size: 11pt; text-decoration: underline;"><a href="tmch2.htm" class="topiclink">Chapter 2</a></span><span class="f_p1-2" style="font-size: 11pt;">, SYNOPSYS has system options VIG and NOVIG that determine how it deals with vignetting. &nbsp;When the program traces rays for image analysis it fills the pupil with the selected pattern and then (in VIG mode) discards those that fall outside of the user-entered apertures. &nbsp;In the case of the pupil defined by WAP 3, however, since the pupil itself is based on rays that clear these apertures, the overall size of the pattern is reduced even before it enters the lens. &nbsp;Additional rays can still be removed from the beam if they encounter feathered edges anywhere in the system, in VIG mode.</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p5" style="border-color: #000000; border-style: solid; border-width: 0px; border-top: none; border-right: none; border-left: none; margin: 0px 0px 1px 0px;"><span class="f_p5">&nbsp;</span></p>
<p><a name="tm3l6"></a><span class="f_p5" style="font-size: 14pt;">Approximate (and Fast) Pupil Options</span></p>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">Another variety of pupil-control options can help define the pupil in cases where the others are not practical. &nbsp;It is sometimes convenient to tell the program to arbitrarily reduce the Y-dimension of the pupil as a function of field angle, in anticipation of a certain amount of vignetting. &nbsp;This can be done in the design phase, using the </span><span class="f_p1-2" style="font-size: 11pt; text-decoration: underline;"><a href="um10311.htm#vset" class="topiclink">VSET</a></span><span class="f_p1-2" style="font-size: 11pt;"> option, and the optimization program then does not try to correct rays outside of the reduced pupil. &nbsp;The most powerful tool, however, is the </span><span class="f_p1-2" style="font-size: 11pt; text-decoration: underline;"><a href="um32.htm#vfield" class="topiclink">VFIELD</a></span><span class="f_p1-2" style="font-size: 11pt;">, which lets you specify the type of vignetting you want to model as an explicit function of field angle. &nbsp;Then you design your lens so that those rays are corrected, and later assign hard clear apertures so that the assumed vignetting actually occurs as you wanted, with the </span><span class="f_p1-2" style="font-size: 11pt; text-decoration: underline;"><a href="um32.htm#cfix" class="topiclink">CFIX</a></span><span class="f_p1-2" style="font-size: 11pt;"> option. &nbsp;Since no pupil searching is involved other than the real pupil, this executes much more quickly than the WAP 2 or 3 options, and it applies to all real rays that are traced by all features of SYNOPSYS.</span></p>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p5" style="border-color: #000000; border-style: solid; border-width: 0px; border-top: none; border-right: none; border-left: none; margin: 0px 0px 1px 0px;"><span class="f_p5">&nbsp;</span></p>
<p><a name="tm3l7"></a><span class="f_p5" style="font-size: 14pt;">Using the Pupil Options</span></p>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">Since the subject of stops and pupils is complicated, and the many options available may be confusing to a beginner, you are encouraged to look at the Object (<a href="object_wizard_mow.htm" class="topiclink">MOW</a>) and Pupil (<a href="hidd_pupilwizard.htm" class="topiclink">MPW</a>) Wizards, where all of the options are clearly organized. &nbsp;To help you understand how to enter a lens in a MACro or in command mode, let me summarize this section and indicate how one selects the best combination for a given lens. &nbsp;There are really just two families:</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 24px;"><span class="f_p1-2" style="font-size: 11pt;">1. &nbsp;Paraxial options</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 24px;"><span class="f_p1-2" style="font-size: 11pt;">input YPP0 or use FFIELD to adjust object height</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 24px;"><span class="f_p1-2" style="font-size: 11pt;">input YMP1 or use FILLSTOP to adjust beam diameter to fill the stop CAO</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 24px;"><span class="f_p1-2" style="font-size: 11pt;">input YPP1 or use APS </span><span class="f_p1-2" style="font-size: 11pt; text-decoration: underline;">SN</span><span class="f_p1-2" style="font-size: 11pt;"> to adjust chief-ray height.</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 24px;"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 24px;"><span class="f_p1-2" style="font-size: 11pt;">2. &nbsp;Real-ray options</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 24px;"><span class="f_p1-2" style="font-size: 11pt;">input YPP0 or use the OCALC command to adjust the object height</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 24px;"><span class="f_p1-2" style="font-size: 11pt;">input YMP1, and then</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 48px;"><span class="f_p1-2" style="font-size: 11pt;">use WAP 1 to keep input beam diameter constant over field</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 48px;"><span class="f_p1-2" style="font-size: 11pt;">use WAP 2 to calculate input beam to just fill the stop</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 48px;"><span class="f_p1-2" style="font-size: 11pt;">use WAP 3 to calculate input beam to clear all hard apertures</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 48px;"><span class="f_p1-2" style="font-size: 11pt;">use CSTOP to force the clear aperture of the stop surface to be adjusted to equal the paraxial aperture there</span></p>
<p class="p_p1-2" style="margin: 0px 0px 0px 24px;"><span class="f_p1-2" style="font-size: 11pt;">input APS -</span><span class="f_p1-2" style="font-size: 11pt; text-decoration: underline;">SN</span><span class="f_p1-2" style="font-size: 11pt;"> to activate the real pupil solve to adjust the chief-ray height.</span></p>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">If the lens will permit, the default paraxial pupil options are preferable since they execute the fastest. &nbsp;Most narrow-angle systems qualify, and all systems with the stop in front. &nbsp;A paraxial stop may be defined with the APS entry with no loss of efficiency. &nbsp;The most common limitation is the need for a real pupil solve due to the presence of pupil aberrations. &nbsp;This is easy to detect; just look at the PAD display, as we did above, and see if the rays nicely fill the stop surface.</span></p>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">There are more esoteric situations, which most beginners seldom see. &nbsp;For example, during optimization of a lens requiring a WAP 2 pupil, it may happen that the required CAO at the stop is varying because of other parameter changes. &nbsp;In order to allow the pupil size to adjust, the CAO must be continuously updated as the design changes. &nbsp;This function is performed by the system parameter </span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold; text-decoration: underline;"><a href="um264.htm" class="topiclink">CSTOP</a></span><span class="f_p1-2" style="font-size: 11pt;"> (part of the RLE or CHG file), which adjusts the CAO to follow the paraxially computed aperture at the stop continuously as the lens changes.</span></p>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">When the entrance pupil has been properly defined, you will in general see vignetting patterns like those shown below. &nbsp;The round circle is the pupil that would result if the stop were the only surface with a CAO. &nbsp;If other surfaces can also vignette because of user-input clear apertures, then only a portion of the pupil actually transmits.</span></p>
<p class="p_footnotetext"><span class="f_footnotetext">&nbsp;</span></p>
<p class="p_footnotetext"><img src="clip0357.png" width="997" height="609" alt="clip0357" style="width:997px;height:609px;border:none"></p>
<p class="p_footnotetext"><span class="f_footnotetext">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">Many of the features of SYNOPSYS, such as image analysis, create a grid of rays filling the entrance pupil and then discard those that violate hard clear apertures or encounter feathered edges. &nbsp;If you turn on NOVIG mode, those rays are not discarded. &nbsp;Other situations are shown in the above diagram. &nbsp;(Note that the optimization program has its own rules for dealing with vignetting: these are described in </span><span class="f_p1-2" style="font-size: 11pt; text-decoration: underline;"><a href="tmch6.htm" class="topiclink">Chapter 6</a></span><span class="f_p1-2" style="font-size: 11pt;">.)</span></p>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p1-2" style="border-color: #000000; border-style: solid; border-width: 0px; border-top: none; border-right: none; border-left: none; margin: 0px 0px 1px 0px;"><span class="f_p1-2">&nbsp;</span></p>
<p><a name="tm3l8"></a><span class="f_p1-2" style="font-size: 14pt;">Other Lens File Options</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">We will finish this chapter with a discussion of two other frequently used system options that belong in the RLE or CHG file, and a discussion of the variety of curvature and thickness solves that are available.</span></p>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">It is sometimes useful to specify an image location that is slightly displaced from the paraxial position. This is accomplished by the system parameter</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2" style="border-color: #000000; border-style: solid; border-width: 0px; padding: 5px 5px 5px 5px; margin: -4px 235px -4px 0px;"><span style="width:48px">&nbsp;</span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">BTH </span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold; text-decoration: underline;">NB</span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">  &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="f_p1-2" style="font-size: 11pt;">(Back THickness parameter)</span></p>
<p>&nbsp;</p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:11pt;font-family:'Symbol';font-style:normal;color:#000000;text-decoration:none;">&#183;</span></td><td style="border:none"><span class="f_p1-2" style="font-size: 11pt;">where </span><span class="f_p1-2" style="font-size: 11pt; text-decoration: underline;">NB</span><span class="f_p1-2" style="font-size: 11pt;"> is the amount of linear focus shift. &nbsp;To shift the image by .01 mm, for example, you could enter &quot;BTH .01&quot; in the lens file. &nbsp;This works only if you have a thickness solve on the last thickness, however, or when you use the </span><span class="f_p1-2" style="font-size: 11pt; text-decoration: underline;"><a href="um32.htm#aperfect" class="topiclink">APERFECT</a></span><span class="f_p1-2" style="font-size: 11pt;"> option.</span></td></tr></table></div><p style="text-align: justify;">&nbsp;</p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">If the image location is at or near infinity, the lens should be placed in </span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold; text-decoration: underline;"><a href="um32.htm#afocal" class="topiclink">AFOCAL</a></span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;"> </span><span class="f_p1-2" style="font-size: 11pt;">mode. &nbsp;In this case the last two surfaces in the lens file should be flat and coincident, because that is where the program converts from linear to angular output. &nbsp;It is useful to place them at the exit pupil, but not a requirement. &nbsp;In every situation where the program would ordinarily print a set of coordinates at the image, these will then be in angular units (radians) instead. &nbsp;An example afocal system will be described in </span><span class="f_p1-2" style="font-size: 11pt; text-decoration: underline;"><a href="tmch7.htm" class="topiclink">Chapter 7</a></span><span class="f_p1-2" style="font-size: 11pt;">. &nbsp;It is therefore not necessary to use any kind of &quot;perfect lens&quot; at the output, as is done in programs that lack an afocal option. &nbsp;(But there is an option for that too, should you ever need it.)</span></p>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">In </span><span class="f_p1-2" style="font-size: 11pt; text-decoration: underline;"><a href="tm.htm" class="topiclink">Chapter 1</a></span><span class="f_p1-2" style="font-size: 11pt;"> you entered the input data for a singlet lens where you gave no specific value for the final airspace but instead used the mnemonic &quot;YMT&quot;, causing the program to calculate the back focal distance for you. &nbsp;That is one of several kinds of paraxial &quot;solves&quot;, which are devices for assuring that a desired property is maintained by adjusting a designated parameter.</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">The solves available in SYNOPSYS are two kinds: those that control a curvature and those that control a thickness (or airspace). &nbsp;These are entered as surface data, such as&quot; 6 YMT 0&quot;. &nbsp;The list below gives eight kinds, defined in the Y-Z plane. (Another six are available for calculations in the X-Z plane.) The mnemonics are:</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><img src="tm3f8.png" width="596" height="180" alt="tm3f8" style="width:596px;height:180px;border:none"></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">The YMT solve in the singlet therefore indicates that the thickness of the surface is to be controlled so that the Y height of the marginal ray on the next surface is equal to the argument </span><span class="f_p1-2" style="font-size: 11pt; text-decoration: underline;">NB</span><span class="f_p1-2" style="font-size: 11pt;">, or zero in the case of the singlet lens in Chapter 1. &nbsp;Similarly, a curvature solve of the form &quot;UMC 0&quot; would guarantee that the paraxial marginal ray would exit that surface with an angle UA = 0 – or parallel to the optical axis. &nbsp;This is a common way to control the collimation of the beam from an afocal system. &nbsp;A UPC &nbsp;0 solve, on the other hand, would create a telecentric system at that point.</span></p>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">Two other curvature solves are given by the mnemonics APC and CCC. &nbsp;The first is called an aplanatic solve and the second a concentric solve. For example, in the lens below</span></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><img src="tm3f9.png" width="276" height="120" alt="tm3f9" style="width:276px;height:120px;border:none"></p>
<p class="p_p1-2"><span class="f_p1-2">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">surface 2 could be made aplanatic with the input &quot;</span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">2</span><span class="f_p1-2" style="font-size: 11pt;"> </span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">APC&quot; </span><span class="f_p1-2" style="font-size: 11pt;">in the lens file, while the input &quot;</span><span class="f_p1-2" style="font-size: 11pt; font-weight: bold;">2 CCC</span><span class="f_p1-2" style="font-size: 11pt;">&quot; would make it concentric about the chief ray (not shown). &nbsp;These two solves have some restrictions since they make no sense if the paraxial ray has an aperture of zero at the requested surface, and an aplanatic solve yields a flat surface if the beam is locally collimated. &nbsp;It is also possible to control the curvature of a conic section with a solve.</span></p>
<p style="text-align: justify;">&nbsp;</p>
<p class="p_p1-2"><span class="f_p1-2" style="font-size: 11pt;">This concludes what has probably seemed a somewhat complicated chapter. &nbsp;The next one covers some more basic commands, discusses in some depth the dialog-driven interface to SYNOPSYS, and explores some of the many image analysis features of the program.</span></p>
<p class="p_mine-3"><span class="f_mine-3">&nbsp;</span></p>
<p class="p_p1-2"><span class="f_p1-2" style="text-decoration: underline;"><a href="tmch4.htm" class="topiclink">To Chapter 4</a></span></p>

<!--ZOOMSTOP-->
</div></div>
<script type="text/javascript">


</script>
</body>
</html>
