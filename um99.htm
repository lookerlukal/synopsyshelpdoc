<!DOCTYPE HTML>
<html>
<head>
   <title>um99</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />   
   
   <meta http-equiv="X-UA-Compatible" content="IE=8" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <link type="text/css" href="custom.css" rel="stylesheet">

   <style TYPE="text/css" media="screen"> 
      html, body { margin:0; 
             padding:0; 
             overflow: hidden; 
             background: #FFFFFF; 
       } 

      div#printheader { display: none; }
      #idheader { width:100%; 
                  height:auto; 
                  padding: 0; 
                  margin: 0; 
       } 
      #idcontent { position:relative }                                               
      #callout-table, #overview-table {display:block; position:relative; top:0; left:0;}
      #callout-icon {display:block; position:absolute; top:-11px; left:-11px;}
      #callout-icon-flag {display:block; position:absolute; top:-11px; left:-8px;}
      #callout-table a {text-decoration: none; color: blue;}
      #callout-table a:visited {text-decoration: none; color: blue;}
      #overview-table a {text-decoration: none; color: black;}
      #overview-table a:visited {text-decoration: none; color: black;}
      #callout-table a:hover, #overview-table a:hover {text-decoration: underline;}      
      #switchtoggles { text-align: right; padding: 0 5px 0 0; font-size: 90%; } 
      p.help-url { margin: 20px 0 5px 0; text-align: center; font-size: 80%; text-decoration: none }
      .sync-toc { color: #ffffff; font-size: 8pt; font-weight: bold; display: none; }
      .sync-toc a { color: #ffffff; text-decoration: none; font-weight: bold;}
      .sync-toc a:visited { color: #ffffff; }
      .sync-toc a:hover { text-decoration: underline; }

   </style>
   <noscript>
   <style type="text/css">
   html, body { overflow: auto; }
   </style> 
   </noscript>
   <style type="text/css" media="print">
      span.f_Heading1 { color: black; }
      #idheader, #printheader img { display:none; }
      #printheader { display: block; margin-top: 20px; }
      #idcontent { margin-top: 10px; position:relative }
   </style>   

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>
   <script type="text/javascript" src="nsh.js"></script>
<!--[if lt IE 7]>
<style type="text/css">
  #idcontent {padding: 0px;} 
  #innerdiv {padding: 10px 5px 5px 10px ;} 
</style> 
<![endif]-->



</head>
<body>


<div id="printheader"><h1 class="p_Heading1"><a name="um99"></a><span class="f_Heading1">um99</span></h1>
</div>
<div id="idheader">
<div id="idheaderbg">
<table style="width:100%;border:none;margin:0px;background:url(background-topic-header.jpg)" cellspacing="0" cellpadding="0"> 
  <tr valign="bottom">
    <td align="left" valign="bottom" class="topichead">
   
   <p class="crumbs" id="idnav"><b>Navigation:</b>&nbsp;
   &raquo;No topics above this level&laquo;
   </p>
   <h1 class="p_Heading1"><a name="um99"></a><span class="f_Heading1">um99</span></h1>

    </td>
    <td align="right" width="120" valign="middle" class="topichead" id="idnav">
    
     <img src="hm_btn_navigate_prev_d.png" border="0"
        ><a href="main_index.htm"
        onmouseover="document.images.main.src='hm_btn_navigate_top_orange.png'" 
        onmouseout="document.images.main.src='hm_btn_navigate_top.png'"><img name=main src="hm_btn_navigate_top.png" border=0 alt="Return to chapter overview"
        ></a><img src="hm_btn_navigate_next_d.png" border="0">
    </td>
  </tr>  
</table>
<!-- The following code displays Expand All/Collapse All links  below the header in topics containing toggles -->
  
</div>
</div>  

<div id="idcontent"><div id="innerdiv">
<!--ZOOMRESTART-->
<p>&nbsp;</p>
<p><a name="mask"></a><span style="font-size: 14pt; font-weight: bold;">9.9 &nbsp;MASK</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">The pupil of a lens is automatically masked by ray failures, clear aperture violations and obscurations. &nbsp;But sometimes a more elaborate mask is called for.</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">For example, it is becoming common for the tiny camera lenses inside cell phones to be located </span><span style="font-size: 11pt; font-style: italic;">behind</span><span style="font-size: 11pt;"> the screen, where it must look past the array of phosphors that create the displayed image. &nbsp;This in effect masks the incoming beam with an array of tiny opaque patches. &nbsp;One can then ask what the effect of that form of pupil mask will be on the image quality. &nbsp;That is the purpose of MASK. &nbsp;Input is as follows:</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt; font-weight: bold;">MASK CREATE</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt; font-weight: bold;">MASK SCAN </span><span style="font-size: 11pt; font-weight: bold; text-decoration: underline;">xsize</span><span style="font-size: 11pt; font-weight: bold;"> </span><span style="font-size: 11pt; font-weight: bold; text-decoration: underline;">ysize</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt; font-weight: bold;">MASK PRINT</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt; font-weight: bold;">MASK OFF</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">The first option (</span><span style="font-size: 11pt; font-weight: bold;">CREATE</span><span style="font-size: 11pt;">) is used to initially create the mask. &nbsp;When this command is entered, the program creates a picture showing a grid of 20 x 20 squares that defines a panel, with an array of bins. &nbsp;The idea is to draw on this screen, using the annotation editor, the locations and size of all opaque areas you wish to block the beam. &nbsp;Then you must save the annotation you just created with a file name of your choice.  </span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">When the annotation file has been saved, you can enter the second option (</span><span style="font-size: 11pt; font-weight: bold;">SCAN</span><span style="font-size: 11pt;">), which will scan that file and create the mask array. &nbsp;The program asks you for the name of an annotation file, and you give it the same name as before. The other input items give the size of the panel in X and Y. &nbsp;When the mask is later used, the program will tile the first surface of the lens with as many of those panels as required to fill the aperture.</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">The </span><span style="font-size: 11pt; font-weight: bold;">PRINT</span><span style="font-size: 11pt;"> option displays a grid of numbers showing the details of the mask.</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">The fourth option (</span><span style="font-size: 11pt; font-weight: bold;">OFF</span><span style="font-size: 11pt;">) turns off the MASK option.</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">Here is an example of the use of this feature. &nbsp;We open a small plastic camera lens file.</span></p>
<p>&nbsp;</p>
<p><img src="clip0512.png" width="317" height="235" alt="clip0512" style="width:317px;height:235px;border:none"></p>
<p><span style="font-size: 11pt;">Next we create the pupil mask.  </span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt; font-family: 'Courier New'; font-weight: bold;">MASK CREATE</span></p>
<p><img src="clip0513.png" width="435" height="462" alt="clip0513" style="width:435px;height:462px;border:none"></p>
<p><span style="font-size: 11pt;">These areas must be drawn with the mouse using either the circle or rectangle tools in the Annotation Editor. &nbsp;They must be drawn from the upper left to the lower right. &nbsp;They can be moved and resized, as can all annotation. &nbsp;When you get the pattern the way you want, be sure to save the annotation file. &nbsp;It is not possible to define a pattern smaller than a single square on the grid, and if the center of a square is inside a rectangle or circle, it is considered blocked. &nbsp;If not, it is open.</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">Next we enter the command</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt; font-family: 'Courier New'; font-weight: bold;">MASK SCAN .12 .12</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">This declares the size of the tile that covers the above array of bins and scans it to create the pupil mask.</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">To verify that the mask is correct, enter the command</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt; font-family: 'Courier New'; font-weight: bold;">MASK PRINT</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> --- MASK PRINT</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;">MASK PANEL LAYOUT</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;">&nbsp;</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 1 1 1 1 1 0 0 0 0 1 1 1 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 0 0 0 0 0 0 0 0 0 1 1 1 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 0 0 0 0 0 0 0 0 0 1 1 1 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 0 0 0 0 0 0 0 0 0 1 1 1 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 0 0 0 0 0 0 0 0 0 1 1 1 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 1 1 1 1 1 0 0 0 0 1 1 1 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 1 1 1 1 1 0 0 0 0 1 1 1 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 1 1 1 1 1 0 0 0 0 1 1 1 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></p>
<p><span style="font-family: 'Courier New'; font-weight: bold;"> ---</span></p>
<p><span style="font-size: 11pt;">This shows you the arrangement of 0's and 1's that correspond to the mask we drew above. &nbsp;The items marked &quot;1&quot; are blocked; the others are open.</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">Now we must check the ray pattern into the lens. &nbsp;Ask for a footprint on surface 1,</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 'Courier New Bold'; font-weight: bold; color: #7b0000; background-color: #dedede;">PUPIL</span><span style="font-family: 'Courier New Bold'; font-weight: bold; background-color: #ffffff;">&nbsp;1 20 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p>
<p><span style="font-family: 'Courier New Bold'; font-weight: bold; color: #7b0000; background-color: #dedede;">PLOT</span><span style="font-family: 'Courier New Bold'; font-weight: bold; background-color: #ffffff;">&nbsp;1 200 0 0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p>
<p><span style="font-family: 'Courier New Bold'; font-weight: bold; background-color: #ffffff;">TRACE P 0 0 2000 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p>
<p><span style="font-family: 'Courier New Bold'; font-weight: bold; background-color: #ffffff;">END &nbsp;</span><span style="font-family: 'Courier New Bold'; background-color: #ffffff;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">This makes a picture showing which rays have been blocked by the mask.</span></p>
<p>&nbsp;</p>
<p><img src="clip0514.png" width="550" height="738" alt="clip0514" style="width:550px;height:738px;border:none"></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">The masked areas are indeed blocked, as we intended. &nbsp;You can see that the tile has been replicated many time in X and Y.</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">Now we examine the effect of this mask on the image quality.</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 'Courier New Bold'; color: #7b0000; background-color: #dedede;">PSPRD</span><span style="font-family: 'Courier New Bold'; background-color: #ffffff;">&nbsp;M 0 6000 0 0 3.5 R</span><span style="font-family: 'Courier New Bold'; font-weight: bold; background-color: #ffffff;">&nbsp;</span></p>
<p>&nbsp;</p>
<p><img src="clip0517.png" width="784" height="581" alt="clip0517" style="width:784px;height:581px;border:none"></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">In order to see the effect of these small masked areas, we asked for a grid of 6000 rays. &nbsp;The image is only slightly different from that in the unmasked lens, so we are not concerned about the effect of this type of mask on this system.</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">The MTF also shows a small effect:</span></p>
<p>&nbsp;</p>
<p><img src="clip0516.png" width="738" height="550" alt="clip0516" style="width:738px;height:550px;border:none"></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt;">Finally, we turn off the MASK, so this mask will not be accidentally applied to other lenses.</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 11pt; font-family: 'Courier New'; font-weight: bold;">MASK OFF.</span></p>

<!--ZOOMSTOP-->
</div></div>
<script type="text/javascript">

var lastSlashPos = document.URL.lastIndexOf("/") > document.URL.lastIndexOf("\\") ? document.URL.lastIndexOf("/") : document.URL.lastIndexOf("\\");
if( document.URL.substring(lastSlashPos + 1, lastSlashPos + 4).toLowerCase() != "~hh" )
{
 if (document.all) setTimeout(function() {nsrInit();},20); 
    else nsrInit();
 } 


</script>
</body>
</html>
